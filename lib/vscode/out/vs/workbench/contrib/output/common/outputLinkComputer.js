/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){var e=["require","exports","vs/base/common/extpath","vs/base/common/platform","vs/base/common/strings","vs/base/common/uri","vs/base/common/path","vs/base/common/map","vs/base/common/network","vs/base/common/iterator","vs/base/common/async","vs/base/common/glob","vs/base/common/arrays","vs/base/common/resources","vs/base/common/cancellation","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/workbench/contrib/output/common/outputLinkComputer","vs/editor/common/core/range"],t=function(t){for(var s=[],r=0,n=t.length;r<n;r++)s[r]=e[t[r]];return s};define(e[9],t([0,1]),(function(e,t){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.MappedNavigator=t.MappedIterator=t.ArrayNavigator=t.ArrayIterator=t.getSequenceIterator=t.ChainableIterator=t.Iterator=t.Iterable=t.FIN=void 0,t.FIN={done:!0,value:void 0},function(e){e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const s of e)if(t(s))return!0;return!1},
e.filter=function*(e,t){for(const s of e)t(s)&&(yield s)},e.map=function*(e,t){for(const s of e)yield t(s)}}(t.Iterable||(t.Iterable={})),function(e){const s={next:()=>t.FIN};e.empty=function(){return s},e.single=function(e){let s=!1;return{next:()=>s?t.FIN:(s=!0,{done:!1,value:e})}},e.fromArray=function(e,s=0,r=e.length){return{next:()=>s>=r?t.FIN:{done:!1,value:e[s++]}}},e.fromNativeIterator=function(e){return{next(){const s=e.next();return s.done?t.FIN:{done:!1,value:s.value}}}},e.from=function(t){return t?Array.isArray(t)?e.fromArray(t):t:e.empty()},e.map=function(e,s){return{next(){const r=e.next();return r.done?t.FIN:{done:!1,value:s(r.value)}}}},e.filter=function(e,s){return{next(){for(;;){const r=e.next();if(r.done)return t.FIN;if(s(r.value))return{done:!1,value:r.value}}}}},e.some=function(e,t){for(;;){const s=e.next();if(s.done)return!1;if(t(s.value))return!0}},e.forEach=function(e,t){for(let s=e.next();!s.done;s=e.next())t(s.value)},e.collect=function(e,t=Number.POSITIVE_INFINITY){const s=[]
;if(0===t)return s;let r=0;for(let n=e.next();!n.done&&(s.push(n.value),!(++r>=t));n=e.next());return s},e.concat=function(...e){let s=0;return{next(){if(s>=e.length)return t.FIN;const r=e[s].next();return r.done?(s++,this.next()):r}}},e.chain=function(e){return new r(e)}}(s=t.Iterator||(t.Iterator={}));class r{constructor(e){this.it=e}next(){return this.it.next()}map(e){return new r(s.map(this.it,e))}filter(e){return new r(s.filter(this.it,e))}}t.ChainableIterator=r,t.getSequenceIterator=function(e){return Array.isArray(e)?s.fromArray(e):e||s.empty()};class n{constructor(e,t=0,s=e.length,r=t-1){this.items=e,this.start=t,this.end=s,this.index=r}first(){return this.index=this.start,this.current()}next(){return this.index=Math.min(this.index+1,this.end),this.current()}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}}t.ArrayIterator=n;t.ArrayNavigator=class extends n{constructor(e,t=0,s=e.length,r=t-1){super(e,t,s,r)}current(){return super.current()}previous(){
return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}parent(){return null}};class i{constructor(e,t){this.iterator=e,this.fn=t}next(){return this.fn(this.iterator.next())}}t.MappedIterator=i;t.MappedNavigator=class extends i{constructor(e,t){super(e,t),this.navigator=e}current(){return this.fn(this.navigator.current())}previous(){return this.fn(this.navigator.previous())}parent(){return this.fn(this.navigator.parent())}first(){return this.fn(this.navigator.first())}last(){return this.fn(this.navigator.last())}next(){return this.fn(this.navigator.next())}}})),define(e[10],t([0,1,14,15,16,17]),(function(e,t,s,r,n,i){"use strict";function o(e){return e&&"function"==typeof e.then}function a(e){const t=new s.CancellationTokenSource,n=e(t.token),i=new Promise((e,s)=>{t.token.onCancellationRequested(()=>{s(r.canceled())}),Promise.resolve(n).then(s=>{t.dispose(),e(s)},e=>{t.dispose(),s(e)})})
;return new class{cancel(){t.cancel()}then(e,t){return i.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return i.finally(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.RunOnceWorker=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.first=t.sequence=t.ignoreErrors=t.disposableTimeout=t.timeout=t.Barrier=t.ThrottledDelayer=t.Delayer=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0,t.isThenable=o,t.createCancelablePromise=a,t.raceCancellation=function(e,t,s){return Promise.race([e,new Promise(e=>t.onCancellationRequested(()=>e(s)))])},t.raceTimeout=function(e,t,s){let r=void 0;const n=setTimeout(()=>{null==r||r(),null==s||s()},t);return Promise.race([e.finally(()=>clearTimeout(n)),new Promise(e=>r=e)])},t.asPromise=function(e){return new Promise((t,s)=>{const r=e();o(r)?r.then(t,s):t(r)})};class h{constructor(){this.activePromise=null,
this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}}t.Throttler=h;t.Sequencer=class{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e())}};class u{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{
if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(r.canceled()),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}t.Delayer=u;t.ThrottledDelayer=class{constructor(e){this.delayer=new u(e),this.throttler=new h}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}};function l(e,t){return t?new Promise((s,n)=>{const i=setTimeout(s,e);t.onCancellationRequested(()=>{clearTimeout(i),n(r.canceled())})}):a(t=>l(e,t))}t.Barrier=class{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{
this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}},t.timeout=l,t.disposableTimeout=function(e,t=0){const s=setTimeout(e,t);return i.toDisposable(()=>clearTimeout(s))},t.ignoreErrors=function(e){return e.then(void 0,e=>void 0)},t.sequence=function(e){const t=[];let s=0;const r=e.length;return Promise.resolve(null).then((function n(i){null!=i&&t.push(i);const o=s<r?e[s++]():null;return o?o.then(n):Promise.resolve(t)}))},t.first=function(e,t=(e=>!!e),s=null){let r=0;const n=e.length,i=()=>{if(r>=n)return Promise.resolve(s);const o=e[r++];return Promise.resolve(o()).then(e=>t(e)?Promise.resolve(e):i())};return i()};class c{constructor(e){this._size=0,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new n.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(e){return this._size++,new Promise((t,s)=>{this.outstandingPromises.push({factory:e,c:t,e:s
}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}t.Limiter=c;class f extends c{constructor(){super(1)}}t.Queue=f;t.ResourceQueue=class{constructor(){this.queues=new Map}queueFor(e){const t=e.toString();if(!this.queues.has(t)){const e=new f;e.onFinished(()=>{e.dispose(),this.queues.delete(t)}),this.queues.set(t,e)}return this.queues.get(t)}dispose(){this.queues.forEach(e=>e.dispose()),this.queues.clear()}};t.TimeoutTimer=class{constructor(e,t){this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){
this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}};t.IntervalTimer=class{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}};class d{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=d;t.RunOnceWorker=class extends d{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){
const e=this.units;this.units=[],this.runner&&this.runner(e)}dispose(){this.units=[],super.dispose()}},function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});t.runWhenIdle=t=>{const s=setTimeout(()=>t(e));let r=!1;return{dispose(){r||(r=!0,clearTimeout(s))}}}}else t.runWhenIdle=(e,t)=>{const s=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let r=!1;return{dispose(){r||(r=!0,cancelIdleCallback(s))}}}}();t.IdleValue=class{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=t.runWhenIdle(()=>this._executor())}dispose(){this._handle.dispose()}getValue(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}},t.retry=async function(e,t,s){let r;for(let n=0;n<s;n++)try{return await e()}catch(e){r=e,await l(t)}throw r};t.TaskSequentializer=class{hasPending(e){
return!!this._pending&&("number"==typeof e?this._pending.taskId===e:!!this._pending)}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){var e;null===(e=this._pending)||void 0===e||e.cancel()}setPending(e,t,s){return this._pending={taskId:e,cancel:()=>null==s?void 0:s(),promise:t},t.then(()=>this.donePending(e),()=>this.donePending(e)),t}donePending(e){this._pending&&e===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const e=this._next;this._next=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}setNext(e){if(this._next)this._next.run=e;else{let t,s;const r=new Promise((e,r)=>{t=e,s=r});this._next={run:e,promise:r,promiseResolve:t,promiseReject:s}}return this._next.promise}}})),define(e[2],t([0,1,3,4,6]),(function(e,t,s,r,n){"use strict";function i(e){return 47===e||92===e}Object.defineProperty(t,"__esModule",{value:!0}),
t.indexOfPath=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toSlashes=t.isPathSeparator=void 0,t.isPathSeparator=i,t.toSlashes=function(e){return e.replace(/[\\/]/g,n.posix.sep)},t.getRoot=function(e,t=n.posix.sep){if(!e)return"";const s=e.length,r=e.charCodeAt(0);if(i(r)){if(i(e.charCodeAt(1))&&!i(e.charCodeAt(2))){let r=3;const n=r;for(;r<s&&!i(e.charCodeAt(r));r++);if(n!==r&&!i(e.charCodeAt(r+1)))for(r+=1;r<s;r++)if(i(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}return t}if(u(r)&&58===e.charCodeAt(1))return i(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let o=e.indexOf("://");if(-1!==o)for(o+=3;o<s;o++)if(i(e.charCodeAt(o)))return e.slice(0,o+1);return""},t.isUNC=function(e){if(!s.isWindows)return!1;if(!e||e.length<5)return!1;let t=e.charCodeAt(0);if(92!==t)return!1;if(92!==(t=e.charCodeAt(1)))return!1;let r=2;const n=r;for(;r<e.length&&92!==(t=e.charCodeAt(r));r++);return n!==r&&(t=e.charCodeAt(r+1),
!isNaN(t)&&92!==t)};const o=/[\\/:\*\?"<>\|]/g,a=/[\\/]/g,h=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])$/i;function u(e){return e>=65&&e<=90||e>=97&&e<=122}t.isValidBasename=function(e,t=s.isWindows){const r=t?o:a;return!(!e||0===e.length||/^\s+$/.test(e))&&(r.lastIndex=0,!r.test(e)&&((!t||!h.test(e))&&("."!==e&&".."!==e&&((!t||"."!==e[e.length-1])&&((!t||e.length===e.trim().length)&&!(e.length>255))))))},t.isEqual=function(e,t,s){const n=e===t;return!s||n?n:!(!e||!t)&&r.equalsIgnoreCase(e,t)},t.isEqualOrParent=function(e,t,s,i=n.sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(s){if(!r.startsWithIgnoreCase(e,t))return!1;if(t.length===e.length)return!0;let s=t.length;return t.charAt(t.length-1)===i&&s--,e.charAt(s)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)},t.isWindowsDriveLetter=u,t.sanitizeFilePath=function(e,t){return s.isWindows&&e.endsWith(":")&&(e+=n.sep),n.isAbsolute(e)||(e=n.join(t,e)),e=n.normalize(e),
s.isWindows?(e=r.rtrim(e,n.sep)).endsWith(":")&&(e+=n.sep):(e=r.rtrim(e,n.sep))||(e=n.sep),e},t.isRootOrDriveLetter=function(e){const t=n.normalize(e);return s.isWindows?!(e.length>3)&&(u(t.charCodeAt(0))&&58===t.charCodeAt(1)&&(2===e.length||92===t.charCodeAt(2))):t===n.posix.sep},t.indexOfPath=function(e,t,s){return t.length>e.length?-1:e===t?0:(s&&(e=e.toLowerCase(),t=t.toLowerCase()),e.indexOf(t))}})),define(e[7],t([0,1,5,9]),(function(e,t,s,r){"use strict";function n(e){const t=[];return e.forEach(e=>t.push(e)),t}function i(e){const t=[];return e.forEach((e,s)=>t.push(s)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=t.ResourceMap=t.TernarySearchTree=t.PathIterator=t.StringIterator=t.setToString=t.mapToString=t.getOrSet=t.keys=t.values=void 0,t.values=n,t.keys=i,t.getOrSet=function(e,t,s){let r=e.get(t);return void 0===r&&(r=s,e.set(t,r)),r},t.mapToString=function(e){const t=[];return e.forEach((e,s)=>{t.push(`${s} => ${e}`)}),`Map(${e.size}) {${t.join(", ")}}`},
t.setToString=function(e){const t=[];return e.forEach(e=>{t.push(e)}),`Set(${e.size}) {${t.join(", ")}}`};class o{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}t.StringIterator=o;class a{constructor(e=!0){this._splitOnBackslash=e}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){let t=0;const s=e.length;let r=this._from;for(;t<s&&r<this._to;){const s=e.charCodeAt(t)-this._value.charCodeAt(r);if(0!==s)return s;t+=1,r+=1}return s===this._to-this._from?0:t<s?-1:1}value(){
return this._value.substring(this._from,this._to)}}t.PathIterator=a;class h{isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class u{constructor(e){this._iter=e}static forPaths(){return new u(new a)}static forStrings(){return new u(new o)}clear(){this._root=void 0}set(e,t){const s=this._iter.reset(e);let r;for(this._root||(this._root=new h,this._root.segment=s.value()),r=this._root;;){const e=s.cmp(r.segment);if(e>0)r.left||(r.left=new h,r.left.segment=s.value()),r=r.left;else if(e<0)r.right||(r.right=new h,r.right.segment=s.value()),r=r.right;else{if(!s.hasNext())break;s.next(),r.mid||(r.mid=new h,r.mid.segment=s.value()),r=r.mid}}const n=r.value;return r.value=t,r.key=e,n}get(e){const t=this._iter.reset(e);let s=this._root;for(;s;){const e=t.cmp(s.segment);if(e>0)s=s.left;else if(e<0)s=s.right;else{if(!t.hasNext())break;t.next(),s=s.mid}}return s?s.value:void 0}delete(e){const t=this._iter.reset(e),s=[];let r=this._root;for(;r;){const e=t.cmp(r.segment);if(e>0)s.push([1,r]),
r=r.left;else if(e<0)s.push([-1,r]),r=r.right;else{if(!t.hasNext()){for(r.value=void 0;s.length>0&&r.isEmpty();){let[e,t]=s.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}r=t}break}t.next(),s.push([0,r]),r=r.mid}}}findSubstr(e){const t=this._iter.reset(e);let s=this._root,r=void 0;for(;s;){const e=t.cmp(s.segment);if(e>0)s=s.left;else if(e<0)s=s.right;else{if(!t.hasNext())break;t.next(),r=s.value||r,s=s.mid}}return s&&s.value||r}findSuperstr(e){const t=this._iter.reset(e);let s=this._root;for(;s;){const e=t.cmp(s.segment);if(e>0)s=s.left;else if(e<0)s=s.right;else{if(!t.hasNext())return s.mid?this._nodeIterator(s.mid):void 0;t.next(),s=s.mid}}}_nodeIterator(e){let t,s,n;return{next:()=>(n||(n=[],s=0,this._forEach(e,e=>n.push(e))),s>=n.length?r.FIN:(t?t.value=n[s++]:t={done:!1,value:n[s++]},t))}}forEach(e){this._forEach(this._root,e)}_forEach(e,t){e&&(this._forEach(e.left,t),e.value&&t(e.value,e.key),this._forEach(e.mid,t),this._forEach(e.right,t))}}
t.TernarySearchTree=u;class l{constructor(){this.map=new Map,this.ignoreCase=!1}set(e,t){this.map.set(this.toKey(e),t)}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e){this.map.forEach((t,r)=>e(t,s.URI.parse(r)))}values(){return n(this.map)}toKey(e){let t=e.toString();return this.ignoreCase&&(t=t.toLowerCase()),t}keys(){return i(this.map).map(e=>s.URI.parse(e))}clone(){const e=new l;return this.map.forEach((t,s)=>e.map.set(s,t)),e}}t.ResourceMap=l,function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"}(t.Touch||(t.Touch={}));class c{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e
;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const s=this._map.get(e);if(s)return 0!==t&&this.touch(s,t),s.value}set(e,t,s=0){let r=this._map.get(e);if(r)r.value=t,0!==s&&this.touch(r,s);else{switch(r={key:e,value:t,next:void 0,previous:void 0},s){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:default:this.addItemLast(r)}this._map.set(e,r),this._size++}}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let s=this._head;for(;s;)t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),s=s.next}values(){const e=[];let t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){const e=[];let t=this._head;for(;t;)e.push(t.key),t=t.next;return e
}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,s=this.size;for(;t&&s>e;)this._map.delete(t.key),t=t.next,s--;this._head=t,this._size=s,t&&(t.previous=void 0)}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,s=e.previous;if(!t||!s)throw new Error("Invalid list");t.previous=s,s.next=t}e.next=void 0,e.previous=void 0}touch(e,t){
if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(t.previous=s,s.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(2===t){if(e===this._tail)return;const t=e.next,s=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=s,s.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}toJSON(){const e=[];return this.forEach((t,s)=>{e.push([s,t])}),e}fromJSON(e){this.clear();for(const[t,s]of e)this.set(t,s)}}t.LinkedMap=c;t.LRUCache=class extends c{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e){return super.get(e,2)}peek(e){return super.get(e,0)}set(e,t){super.set(e,t,2),this.checkTrim()}checkTrim(){
this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}})),define(e[11],t([0,1,12,4,2,6,7,10]),(function(e,t,s,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.hasSiblingFn=t.hasSiblingPromiseFn=t.parse=t.match=t.splitGlobAware=t.getEmptyExpression=void 0,t.getEmptyExpression=function(){return Object.create(null)};const h="**",u="/",l="[/\\\\]",c="[^/\\\\]",f=/\//g;function d(e){switch(e){case 0:return"";case 1:return`${c}*?`;default:return`(?:${l}|${c}+${l}|${l}${c}+)*?`}}function m(e,t){if(!e)return[];const s=[];let r=!1,n=!1,i="";for(const o of e){switch(o){case t:if(!r&&!n){s.push(i),i="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":n=!0;break;case"]":n=!1}i+=o}return i&&s.push(i),s}t.splitGlobAware=m
;const p=/^\*\*\/\*\.[\w\.-]+$/,g=/^\*\*\/([\w\.-]+)\/?$/,v=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,_=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,x=/^\*\*((\/[\w\.-]+)+)\/?$/,P=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,y=new o.LRUCache(1e4),b=function(){return!1},w=function(){return null};function T(e,t){if(!e)return w;let n;const i=`${n=(n="string"!=typeof e?e.pattern:e).trim()}_${!!t.trimForExclusions}`;let o,a=y.get(i);if(a)return k(a,e);if(p.test(n)){const e=n.substr(4);a=function(t,s){return"string"==typeof t&&t.endsWith(e)?n:null}}else a=(o=g.exec(I(n,t)))?function(e,t){const s=`/${e}`,r=`\\${e}`,n=function(n,i){return"string"!=typeof n?null:i?i===e?t:null:n===e||n.endsWith(s)||n.endsWith(r)?t:null},i=[e];return n.basenames=i,n.patterns=[t],n.allBasenames=i,n}(o[1],n):(t.trimForExclusions?_:v).test(n)?function(e,t){const r=E(e.slice(1,-1).split(",").map(e=>T(e,t)).filter(e=>e!==w),e),n=r.length;if(!n)return w;if(1===n)return r[0];const i=function(t,s){
for(let n=0,i=r.length;n<i;n++)if(r[n](t,s))return e;return null},o=s.first(r,e=>!!e.allBasenames);o&&(i.allBasenames=o.allBasenames);const a=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);a.length&&(i.allPaths=a);return i}(n,t):(o=x.exec(I(n,t)))?S(o[1].substr(1),n,!0):(o=P.exec(I(n,t)))?S(o[1],n,!1):function(e){try{const t=new RegExp(`^${function e(t){if(!t)return"";let s="";const n=m(t,u);if(n.every(e=>e===h))s=".*";else{let t=!1;n.forEach((i,o)=>{if(i===h)return void(t||(s+=d(2),t=!0));let a=!1,f="",p=!1,g="";for(const t of i)if("}"!==t&&a)f+=t;else if(!p||"]"===t&&g)switch(t){case"{":a=!0;continue;case"[":p=!0;continue;case"}":const n=`(?:${m(f,",").map(t=>e(t)).join("|")})`;s+=n,a=!1,f="";break;case"]":s+="["+g+"]",p=!1,g="";break;case"?":s+=c;continue;case"*":s+=d(1);continue;default:s+=r.escapeRegExpCharacters(t)}else{let e;g+=e="-"===t?t:"^"!==t&&"!"!==t||g?t===u?"":r.escapeRegExpCharacters(t):"^"}o<n.length-1&&(n[o+1]!==h||o+2<n.length)&&(s+=l),t=!1})}return s}(e)}$`);return function(s){
return t.lastIndex=0,"string"==typeof s&&t.test(s)?e:null}}catch(e){return w}}(n);return y.set(i,a),k(a,e)}function k(e,t){return"string"==typeof t?e:function(s,r){return n.isEqualOrParent(s,t.base)?e(i.relative(t.base,s),r):null}}function I(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function S(e,t,s){const r=i.sep!==i.posix.sep?e.replace(f,i.sep):e,n=i.sep+r,o=s?function(e,s){return"string"!=typeof e||e!==r&&!e.endsWith(n)?null:t}:function(e,s){return"string"==typeof e&&e===r?t:null};return o.allPaths=[(s?"*/":"./")+e],o}function C(e,t={}){if(!e)return b;if("string"==typeof e||A(e)){const s=T(e,t);if(s===w)return b;const r=function(e,t){return!!s(e,t)};return s.allBasenames&&(r.allBasenames=s.allBasenames),s.allPaths&&(r.allPaths=s.allPaths),r}return function(e,t){const r=E(Object.getOwnPropertyNames(e).map(s=>(function(e,t,s){if(!1===t)return w;const r=T(e,s);if(r===w)return w;if("boolean"==typeof t)return r;if(t){const s=t.when;if("string"==typeof s){const t=(t,n,i,o)=>{
if(!o||!r(t,n))return null;const h=o(s.replace("$(basename)",i));return a.isThenable(h)?h.then(t=>t?e:null):h?e:null};return t.requiresSiblings=!0,t}}return r})(s,e[s],t)).filter(e=>e!==w)),n=r.length;if(!n)return w;if(!r.some(e=>!!e.requiresSiblings)){if(1===n)return r[0];const e=function(e,t){for(let s=0,n=r.length;s<n;s++){const n=r[s](e,t);if(n)return n}return null},t=s.first(r,e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);const i=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return i.length&&(e.allPaths=i),e}const o=function(e,t,s){let n=void 0;for(let o=0,a=r.length;o<a;o++){const a=r[o];a.requiresSiblings&&s&&(t||(t=i.basename(e)),n||(n=t.substr(0,t.length-i.extname(e).length)));const h=a(e,t,n,s);if(h)return h}return null},h=s.first(r,e=>!!e.allBasenames);h&&(o.allBasenames=h.allBasenames);const u=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);u.length&&(o.allPaths=u);return o}(e,t)}function R(e){const t={};for(const s of e)t[s]=!0;return t}function A(e){const t=e
;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}function E(e,t){const s=e.filter(e=>!!e.basenames);if(s.length<2)return e;const r=s.reduce((e,t)=>{const s=t.basenames;return s?e.concat(s):e},[]);let n;if(t){n=[];for(let e=0,s=r.length;e<s;e++)n.push(t)}else n=s.reduce((e,t)=>{const s=t.patterns;return s?e.concat(s):e},[]);const i=function(e,t){if("string"!=typeof e)return null;if(!t){let s;for(s=e.length;s>0;s--){const t=e.charCodeAt(s-1);if(47===t||92===t)break}t=e.substr(s)}const s=r.indexOf(t);return-1!==s?n[s]:null};i.basenames=r,i.patterns=n,i.allBasenames=r;const o=e.filter(e=>!e.basenames);return o.push(i),o}t.match=function(e,t,s){return!(!e||"string"!=typeof t)&&C(e)(t,void 0,s)},t.parse=C,t.hasSiblingPromiseFn=function(e){if(!e)return;let t;return s=>(t||(t=(e()||Promise.resolve([])).then(e=>e?R(e):{})),t.then(e=>!!e[s]))},t.hasSiblingFn=function(e){if(!e)return;let t;return s=>{if(!t){const s=e();t=s?R(s):{}}return!!t[s]}},t.isRelativePattern=A,t.getBasenameTerms=function(e){
return e.allBasenames||[]},t.getPathTerms=function(e){return e.allPaths||[]}})),define(e[8],t([0,1,5,3]),(function(e,t,s,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteAuthorities=t.Schemas=void 0,function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.userData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeSettings="vscode-settings",e.webviewPanel="webview-panel"}(n=t.Schemas||(t.Schemas={}));t.RemoteAuthorities=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e
}set(e,t,s){this._hosts[e]=t,this._ports[e]=s}setConnectionToken(e,t){this._connectionTokens[e]=t}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let i=this._hosts[t];i&&-1!==i.indexOf(":")&&(i=`[${i}]`);const o=this._connectionTokens[t];let a=`path=${encodeURIComponent(e.path)}`;return"string"==typeof o&&(a+=`&tkn=${encodeURIComponent(o)}`),s.URI.from({scheme:r.isWeb?this._preferredWebSchema:n.vscodeRemoteResource,authority:window.location.host,path:`${window.location.pathname.replace(/\/+$/,"")}/vscode-remote-resource`,query:a})}}})),define(e[13],t([0,1,2,6,5,4,8,3,11,7]),(function(e,t,s,r,n,i,o,a,h,u){"use strict";function l(e){let t;const r=e.path;return t=e.authority&&r.length>1&&"file"===e.scheme?`//${e.authority}${r}`:a.isWindows&&47===r.charCodeAt(0)&&s.isWindowsDriveLetter(r.charCodeAt(1))&&58===r.charCodeAt(2)?r.substr(1):r,a.isWindows&&(t=t.replace(/\//g,"\\")),t}function c(e){return!e||e.scheme!==o.Schemas.file||!a.isLinux}function f(e,t,r=c(e)){if(e.scheme===t.scheme){
if(e.scheme===o.Schemas.file)return s.isEqualOrParent(l(e),l(t),r)&&e.query===t.query;if(d(e.authority,t.authority))return s.isEqualOrParent(e.path||"/",t.path||"/",r,"/")&&e.query===t.query}return!1}function d(e,t){return e===t||i.equalsIgnoreCase(e,t)}function m(e){return r.posix.basename(e.path)}function p(e,t=r.sep){if(e.scheme===o.Schemas.file){const r=l(e);return r.length>s.getRoot(r).length&&r[r.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}function g(e,t,n=c(e)){if(e.scheme!==t.scheme||!d(e.authority,t.authority))return;if(e.scheme===o.Schemas.file){const n=r.relative(l(e),l(t));return a.isWindows?s.toSlashes(n):n}let i=e.path||"/",h=t.path||"/";if(n){let e=0;for(const t=Math.min(i.length,h.length);e<t&&(i.charCodeAt(e)===h.charCodeAt(e)||i.charAt(e).toLowerCase()===h.charAt(e).toLowerCase());e++);i=h.substr(0,e)+i.substr(e)}return r.posix.relative(i,h)}Object.defineProperty(t,"__esModule",{value:!0}),
t.toLocalResource=t.ResourceGlobMatcher=t.DataUri=t.distinctParents=t.resolvePath=t.relativePath=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isAbsolutePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.isEqual=t.isEqualAuthority=t.isEqualOrParent=t.basenameOrAuthority=t.hasToIgnoreCase=t.getComparisonKey=t.originalFSPath=void 0,t.originalFSPath=l,t.getComparisonKey=function(e,t=c(e)){let s=e.path||"/";return t&&(s=s.toLowerCase()),e.with({authority:e.authority.toLowerCase(),path:s,fragment:null}).toString()},t.hasToIgnoreCase=c,t.basenameOrAuthority=function(e){return m(e)||e.authority},t.isEqualOrParent=f,t.isEqualAuthority=d,t.isEqual=function(e,t,s=c(e),r=!0){if(e===t)return!0;if(!e||!t)return!1;if(e.scheme!==t.scheme||!d(e.authority,t.authority))return!1;const n=e.path||"/",o=t.path||"/";return(n===o||s&&i.equalsIgnoreCase(n,o))&&e.query===t.query&&(r||e.fragment===t.fragment)},t.basename=m,t.extname=function(e){return r.posix.extname(e.path)},
t.dirname=function(e){if(0===e.path.length)return e;let t;return e.scheme===o.Schemas.file?t=n.URI.file(r.dirname(l(e))).path:(t=r.posix.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})},t.joinPath=function(e,...t){let s;return s="file"===e.scheme?n.URI.file(r.join(l(e),...t)).path:r.posix.join(e.path||"/",...t),e.with({path:s})},t.normalizePath=function(e){if(!e.path.length)return e;let t;return t=e.scheme===o.Schemas.file?n.URI.file(r.normalize(l(e))).path:r.posix.normalize(e.path),e.with({path:t})},t.isAbsolutePath=function(e){return!!e.path&&"/"===e.path[0]},t.hasTrailingPathSeparator=p,t.removeTrailingPathSeparator=function(e,t=r.sep){return p(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e},t.addTrailingPathSeparator=function(e,t=r.sep){let n=!1;if(e.scheme===o.Schemas.file){const r=l(e);n=void 0!==r&&r.length===s.getRoot(r).length&&r[r.length-1]===t}else{t="/";const s=e.path
;n=1===s.length&&47===s.charCodeAt(s.length-1)}return n||p(e,t)?e:e.with({path:e.path+"/"})},t.relativePath=g,t.resolvePath=function(e,t){if(e.scheme===o.Schemas.file){const s=n.URI.file(r.resolve(l(e),t));return e.with({authority:s.authority,path:s.path})}return-1===t.indexOf("/")&&(t=s.toSlashes(t),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t)),e.with({path:r.posix.resolve(e.path,t)})},t.distinctParents=function(e,t){const s=[];for(let r=0;r<e.length;r++){const n=t(e[r]);e.some((e,s)=>s!==r&&f(n,t(e)))||s.push(e[r])}return s},function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const s=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{const[t,r]=e.split(":");t&&r&&s.set(t,r)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&s.set(e.META_DATA_MIME,r),s}}(t.DataUri||(t.DataUri={}));t.ResourceGlobMatcher=class{constructor(e,t){
this.expressionsByRoot=u.TernarySearchTree.forPaths(),this.globalExpression=h.parse(e);for(const e of t)this.expressionsByRoot.set(e.root.toString(),{root:e.root,expression:h.parse(e.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e.toString());if(t){const s=g(t.root,e);if(s&&t.expression(s))return!0}return!!this.globalExpression(e.path)}},t.toLocalResource=function(e,t){if(t){let s=e.path;return s&&s[0]!==r.posix.sep&&(s=r.posix.sep+s),e.with({scheme:o.Schemas.vscodeRemote,authority:t,path:s})}return e.with({scheme:o.Schemas.file})}})),define(e[18],t([0,1,5,2,13,4,19,3,8,12]),(function(e,t,s,r,n,i,o,a,h,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.OutputLinkComputer=void 0;class l{constructor(e,t){this.ctx=e,this.patterns=new Map,this.computePatterns(t)}computePatterns(e){const t=e.workspaceFolders.sort((e,t)=>t.length-e.length).map(e=>s.URI.parse(e));for(const e of t){const t=l.createPatterns(e);this.patterns.set(e,t)}}getModel(e){
const t=this.ctx.getMirrorModels();return u.find(t,t=>t.uri.toString()===e)}computeLinks(e){const t=this.getModel(e);if(!t)return[];const s=[],r=t.getValue().split(/\r\n|\r|\n/);for(const[e,t]of this.patterns){const i={toResource:t=>"string"==typeof t?n.joinPath(e,t):null};for(let e=0,n=r.length;e<n;e++)s.push(...l.detectLinks(r[e],e+1,t,i))}return s}static createPatterns(e){const t=[],s=e.scheme===h.Schemas.file?e.fsPath:e.path,n=[s];a.isWindows&&e.scheme===h.Schemas.file&&n.push(r.toSlashes(s));for(const e of n){const s='[^\\s\\(\\):<>"]',r=`${`(?:${s}| ${s})`}+\\.${s}+`,n=`${s}+`;t.push(new RegExp(i.escapeRegExpCharacters(e)+`(${r}) on line ((\\d+)(, column (\\d+))?)`,"gi")),t.push(new RegExp(i.escapeRegExpCharacters(e)+`(${r}):line ((\\d+)(, column (\\d+))?)`,"gi")),t.push(new RegExp(i.escapeRegExpCharacters(e)+`(${r})(\\s?\\((\\d+)(,(\\d+))?)\\)`,"gi")),t.push(new RegExp(i.escapeRegExpCharacters(e)+`(${n})(:(\\d+))?(:(\\d+))?`,"gi"))}return t}static detectLinks(e,t,s,r){const n=[];return s.forEach(s=>{
let a;s.lastIndex=0;let h=0;for(;null!==(a=s.exec(e));){const s=i.rtrim(a[1],".").replace(/\\/g,"/");let u;try{const e=r.toResource(s);e&&(u=e.toString())}catch(e){continue}if(a[3]){const e=a[3];if(a[5]){const t=a[5];u=i.format("{0}#{1},{2}",u,e,t)}else u=i.format("{0}#{1}",u,e)}const l=i.rtrim(a[0],"."),c=e.indexOf(l,h);h+=c+l.length;const f={startColumn:c+1,startLineNumber:t,endColumn:c+1+l.length,endLineNumber:t};if(n.some(e=>o.Range.areIntersectingOrTouching(e.range,f)))return;n.push({range:f,url:u})}}),n}}t.OutputLinkComputer=l,t.create=function(e,t){return new l(e,t)}}))}).call(this);
//# sourceMappingURL=outputLinkComputer.js.map
