/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){var e=["vs/server/node/util","require","exports","vs/base/common/uriIpc","vs/code/browser/workbench/workbench","vs/workbench/workbench.web.api","vs/base/common/uuid","vs/base/common/cancellation","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/parts/request/browser/request","vs/platform/windows/common/windows","vs/base/common/resources","vs/base/browser/browser","vs/base/common/network"],r=function(r){for(var o=[],t=0,s=r.length;t<s;t++)o[t]=e[r[t]];return o};define(e[0],r([1,2,3]),(function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodePath=r.getUriTransformer=void 0,r.getUriTransformer=e=>new o.URITransformer(e),r.encodePath=e=>e.split("/").map(e=>encodeURIComponent(e)).join("/")})),define(e[4],r([1,2,5,6,7,8,9,10,11,12,13,14,0]),(function(e,r,o,t,s,i,a,n,c,d,l,u,h){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let p=(()=>{class e{get credentials(){if(!this._credentials){try{const r=window.localStorage.getItem(e.CREDENTIALS_OPENED_KEY)
;r&&(this._credentials=JSON.parse(r))}catch(e){}Array.isArray(this._credentials)||(this._credentials=[])}return this._credentials}save(){window.localStorage.setItem(e.CREDENTIALS_OPENED_KEY,JSON.stringify(this.credentials))}async getPassword(e,r){return this.doGetPassword(e,r)}async doGetPassword(e,r){for(const o of this.credentials)if(o.service===e&&("string"!=typeof r||r===o.account))return o.password;return null}async setPassword(e,r,o){this.deletePassword(e,r),this.credentials.push({service:e,account:r,password:o}),this.save()}async deletePassword(e,r){let o=!1;return this._credentials=this.credentials.filter(t=>t.service!==e||t.account!==r||(o=!0,!1)),o&&this.save(),o}async findPassword(e){return this.doGetPassword(e)}async findCredentials(e){return this.credentials.filter(r=>r.service===e).map(({account:e,password:r})=>({account:e,password:r}))}}return e.CREDENTIALS_OPENED_KEY="credentials.provider",e})(),E=(()=>{class e extends a.Disposable{constructor(){super(...arguments),
this._onCallback=this._register(new o.Emitter),this.onCallback=this._onCallback.event}create(r){const o=new Map,s=t.generateUuid();o.set(e.QUERY_KEYS.REQUEST_ID,s);const{scheme:i,authority:a,path:n,query:c,fragment:d}=r||{scheme:void 0,authority:void 0,path:void 0,query:void 0,fragment:void 0};return i&&o.set(e.QUERY_KEYS.SCHEME,i),a&&o.set(e.QUERY_KEYS.AUTHORITY,a),n&&o.set(e.QUERY_KEYS.PATH,n),c&&o.set(e.QUERY_KEYS.QUERY,c),d&&o.set(e.QUERY_KEYS.FRAGMENT,d),this.periodicFetchCallback(s,Date.now()),this.doCreateUri("/callback",o)}async periodicFetchCallback(r,t){const a=new Map;a.set(e.QUERY_KEYS.REQUEST_ID,r);const c=await n.request({url:this.doCreateUri("/fetch-callback",a).toString(!0)},s.CancellationToken.None),d=await i.streamToBuffer(c.stream);if(d.byteLength>0)try{this._onCallback.fire(o.URI.revive(JSON.parse(d.toString())))}catch(e){console.error(e)}else Date.now()-t<e.FETCH_TIMEOUT&&setTimeout(()=>this.periodicFetchCallback(r,t),e.FETCH_INTERVAL)}doCreateUri(e,r){let t=void 0;if(r){let e=0
;r.forEach((r,o)=>{t||(t="");const s=0==e++?"":"&";t+=`${s}${o}=${encodeURIComponent(r)}`})}return o.URI.parse(window.location.href).with({path:e,query:t})}}return e.FETCH_INTERVAL=500,e.FETCH_TIMEOUT=3e5,e.QUERY_KEYS={REQUEST_ID:"vscode-requestId",SCHEME:"vscode-scheme",AUTHORITY:"vscode-authority",PATH:"vscode-path",QUERY:"vscode-query",FRAGMENT:"vscode-fragment"},e})(),w=(()=>{class e{constructor(e,r){this.workspace=e,this.payload=r}async open(e,r){if((null==r?void 0:r.reuse)&&!r.payload&&this.isSame(this.workspace,e))return;const o=this.createTargetUrl(e,r);o&&((null==r?void 0:r.reuse)?window.location.href=o:l.isStandalone?window.open(o,"_blank","toolbar=no"):window.open(o))}createTargetUrl(r,o){let t=void 0;if(r){if(c.isFolderToOpen(r)){const o=r.folderUri.scheme===u.Schemas.vscodeRemote?h.encodePath(r.folderUri.path):encodeURIComponent(r.folderUri.toString());t=`${document.location.origin}${document.location.pathname}?${e.QUERY_PARAM_FOLDER}=${o}`}else if(c.isWorkspaceToOpen(r)){
const o=r.workspaceUri.scheme===u.Schemas.vscodeRemote?h.encodePath(r.workspaceUri.path):encodeURIComponent(r.workspaceUri.toString());t=`${document.location.origin}${document.location.pathname}?${e.QUERY_PARAM_WORKSPACE}=${o}`}}else t=`${document.location.origin}${document.location.pathname}?${e.QUERY_PARAM_EMPTY_WINDOW}=true`;return(null==o?void 0:o.payload)&&(t+=`&${e.QUERY_PARAM_PAYLOAD}=${encodeURIComponent(JSON.stringify(o.payload))}`),t}isSame(e,r){return e&&r?c.isFolderToOpen(e)&&c.isFolderToOpen(r)?d.isEqual(e.folderUri,r.folderUri):!(!c.isWorkspaceToOpen(e)||!c.isWorkspaceToOpen(r))&&d.isEqual(e.workspaceUri,r.workspaceUri):e===r}}return e.QUERY_PARAM_EMPTY_WINDOW="ew",e.QUERY_PARAM_FOLDER="folder",e.QUERY_PARAM_WORKSPACE="workspace",e.QUERY_PARAM_PAYLOAD="payload",e})();!function(){var e;const r=document.getElementById("vscode-workbench-web-configuration"),t=r?r.getAttribute("data-settings"):void 0;if(!r||!t)throw new Error("Missing web configuration element")
;const s=JSON.parse(t),i=e=>e.replace(/^https?:\/\//,"");s.remoteAuthority&&(s.remoteAuthority=i(s.remoteAuthority)),s.workspaceUri&&s.workspaceUri.authority&&(s.workspaceUri.authority=i(s.workspaceUri.authority)),s.folderUri&&s.folderUri.authority&&(s.folderUri.authority=i(s.folderUri.authority)),Array.isArray(s.staticExtensions)&&s.staticExtensions.forEach(e=>{e.extensionLocation=o.URI.revive(e.extensionLocation)});let a,n=(null===(e=s.workspaceProvider)||void 0===e?void 0:e.payload)||Object.create(null);a=s.folderUri?{folderUri:o.URI.revive(s.folderUri)}:s.workspaceUri?{workspaceUri:o.URI.revive(s.workspaceUri)}:void 0,o.create(document.body,Object.assign(Object.assign({},s),{workspaceProvider:new w(a,n),urlCallbackProvider:new E,credentialsProvider:new p}))}()}))}).call(this);
//# sourceMappingURL=workbench.js.map
