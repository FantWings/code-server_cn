/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){var e=["vs/code/browser/workbench/workbench","require","exports","vs/workbench/workbench.web.api","vs/base/common/uuid","vs/base/common/cancellation","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/parts/request/browser/request","vs/platform/windows/common/windows","vs/base/common/resources","vs/base/browser/browser","vs/platform/product/common/product","vs/base/common/network","vs/base/common/path","vs/nls!vs/code/browser/workbench/workbench"];define(e[0],function(o){for(var t=[],r=0,s=o.length;r<s;r++)t[r]=e[o[r]];return t}([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),(function(e,o,t,r,s,i,a,n,c,l,d,p,u,h,E){"use strict";Object.defineProperty(o,"__esModule",{value:!0});class w{get credentials(){if(!this._credentials){try{const e=window.localStorage.getItem(w.CREDENTIALS_OPENED_KEY);e&&(this._credentials=JSON.parse(e))}catch(e){}Array.isArray(this._credentials)||(this._credentials=[])}return this._credentials}save(){
window.localStorage.setItem(w.CREDENTIALS_OPENED_KEY,JSON.stringify(this.credentials))}async getPassword(e,o){return this.doGetPassword(e,o)}async doGetPassword(e,o){for(const t of this.credentials)if(t.service===e&&("string"!=typeof o||o===t.account))return t.password;return null}async setPassword(e,o,t){this.deletePassword(e,o),this.credentials.push({service:e,account:o,password:t}),this.save()}async deletePassword(e,o){let t=!1;return this._credentials=this.credentials.filter(r=>r.service!==e||r.account!==o||(t=!0,!1)),t&&this.save(),t}async findPassword(e){return this.doGetPassword(e)}async findCredentials(e){return this.credentials.filter(o=>o.service===e).map(({account:e,password:o})=>({account:e,password:o}))}}w.CREDENTIALS_OPENED_KEY="credentials.provider";class m extends a.Disposable{constructor(){super(...arguments),this._onCallback=this._register(new t.Emitter),this.onCallback=this._onCallback.event}create(e){const o=new Map,t=r.generateUuid();o.set(m.QUERY_KEYS.REQUEST_ID,t)
;const{scheme:s,authority:i,path:a,query:n,fragment:c}=e||{scheme:void 0,authority:void 0,path:void 0,query:void 0,fragment:void 0};return s&&o.set(m.QUERY_KEYS.SCHEME,s),i&&o.set(m.QUERY_KEYS.AUTHORITY,i),a&&o.set(m.QUERY_KEYS.PATH,a),n&&o.set(m.QUERY_KEYS.QUERY,n),c&&o.set(m.QUERY_KEYS.FRAGMENT,c),this.periodicFetchCallback(t,Date.now()),this.doCreateUri("/callback",o)}async periodicFetchCallback(e,o){const r=new Map;r.set(m.QUERY_KEYS.REQUEST_ID,e);const a=await n.request({url:this.doCreateUri("/fetch-callback",r).toString(!0)},s.CancellationToken.None),c=await i.streamToBuffer(a.stream);if(c.byteLength>0)try{this._onCallback.fire(t.URI.revive(JSON.parse(c.toString())))}catch(e){console.error(e)}else Date.now()-o<m.FETCH_TIMEOUT&&setTimeout(()=>this.periodicFetchCallback(e,o),m.FETCH_INTERVAL)}doCreateUri(e,o){let r=void 0;if(o){let e=0;o.forEach((o,t)=>{r||(r="");const s=0==e++?"":"&";r+=`${s}${t}=${encodeURIComponent(o)}`})}return t.URI.parse(window.location.href).with({path:e,query:r})}}
m.FETCH_INTERVAL=500,m.FETCH_TIMEOUT=3e5,m.QUERY_KEYS={REQUEST_ID:"vscode-requestId",SCHEME:"vscode-scheme",AUTHORITY:"vscode-authority",PATH:"vscode-path",QUERY:"vscode-query",FRAGMENT:"vscode-fragment"};class U{constructor(e,o){this.workspace=e,this.payload=o}async open(e,o){if((null==o?void 0:o.reuse)&&!o.payload&&this.isSame(this.workspace,e))return;const t=this.createTargetUrl(e,o);t&&((null==o?void 0:o.reuse)?window.location.href=t:d.isStandalone?window.open(t,"_blank","toolbar=no"):window.open(t))}createTargetUrl(e,o){let t=void 0;if(e){if(c.isFolderToOpen(e)){const o=e.folderUri.scheme===u.Schemas.vscodeRemote?encodeURIComponent(e.folderUri.path).replace(/%2F/g,"/"):encodeURIComponent(e.folderUri.toString());t=`${document.location.origin}${document.location.pathname}?${U.QUERY_PARAM_FOLDER}=${o}`}else if(c.isWorkspaceToOpen(e)){const o=e.workspaceUri.scheme===u.Schemas.vscodeRemote?encodeURIComponent(e.workspaceUri.path).replace(/%2F/g,"/"):encodeURIComponent(e.workspaceUri.toString())
;t=`${document.location.origin}${document.location.pathname}?${U.QUERY_PARAM_WORKSPACE}=${o}`}}else t=`${document.location.origin}${document.location.pathname}?${U.QUERY_PARAM_EMPTY_WINDOW}=true`;return(null==o?void 0:o.payload)&&(t+=`&${U.QUERY_PARAM_PAYLOAD}=${encodeURIComponent(JSON.stringify(o.payload))}`),t}isSame(e,o){return e&&o?c.isFolderToOpen(e)&&c.isFolderToOpen(o)?l.isEqual(e.folderUri,o.folderUri):!(!c.isWorkspaceToOpen(e)||!c.isWorkspaceToOpen(o))&&l.isEqual(e.workspaceUri,o.workspaceUri):e===o}}U.QUERY_PARAM_EMPTY_WINDOW="ew",U.QUERY_PARAM_FOLDER="folder",U.QUERY_PARAM_WORKSPACE="workspace",U.QUERY_PARAM_PAYLOAD="payload",function(){const e=document.getElementById("vscode-workbench-web-configuration"),o=e?e.getAttribute("data-settings"):void 0;if(!e||!o)throw new Error("Missing web configuration element");const r=JSON.parse(o),s=e=>e.replace(/^https?:\/\//,"");r.remoteAuthority&&(r.remoteAuthority=s(r.remoteAuthority)),r.workspaceUri&&(r.workspaceUri.authority=s(r.workspaceUri.authority)),
r.folderUri&&(r.folderUri.authority=s(r.folderUri.authority)),Array.isArray(r.staticExtensions)&&r.staticExtensions.forEach(e=>{e.extensionLocation=t.URI.revive(e.extensionLocation)});let i,a=Object.create(null),n=void 0;if(i=r.folderUri?{folderUri:t.URI.revive(r.folderUri)}:r.workspaceUri?{workspaceUri:t.URI.revive(r.workspaceUri)}:void 0){const e=c.isWorkspaceToOpen(i)?i.workspaceUri:c.isFolderToOpen(i)?i.folderUri:void 0;e&&(n=[{uri:t.URI.from({scheme:"stable"===p.default.quality?"vscode":"vscode-insiders",authority:u.Schemas.vscodeRemote,path:h.posix.join(h.posix.sep,e.authority,e.path),query:e.query,fragment:e.fragment}),label:E.localize(0,null)}])}t.create(document.body,Object.assign(Object.assign({},r),{workspaceProvider:new U(i,a),urlCallbackProvider:new m,credentialsProvider:new w,applicationLinks:n}))}()}))}).call(this);
//# sourceMappingURL=workbench.js.map
