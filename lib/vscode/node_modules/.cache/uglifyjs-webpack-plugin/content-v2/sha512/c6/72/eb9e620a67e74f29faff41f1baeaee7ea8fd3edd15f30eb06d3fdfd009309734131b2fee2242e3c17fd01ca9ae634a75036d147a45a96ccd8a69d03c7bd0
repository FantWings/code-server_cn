{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"external \\\"vscode\\\"\",\"/repo/lib/vscode/extensions/github-authentication/src/common/logger.ts\",\"external \\\"path\\\"\",\"/repo/lib/vscode/extensions/github-authentication/node_modules/uuid/index.js\",\"/repo/lib/vscode/extensions/github-authentication/node_modules/uuid/lib/rng.js\",\"/repo/lib/vscode/extensions/github-authentication/node_modules/uuid/lib/bytesToUuid.js\",\"external \\\"fs\\\"\",\"/repo/lib/vscode/extensions/github-authentication/src/githubServer.ts\",\"/repo/lib/vscode/extensions/github-authentication/src/extension.ts\",\"/repo/lib/vscode/extensions/github-authentication/src/github.ts\",\"/repo/lib/vscode/extensions/github-authentication/node_modules/uuid/v1.js\",\"external \\\"crypto\\\"\",\"/repo/lib/vscode/extensions/github-authentication/node_modules/uuid/v4.js\",\"/repo/lib/vscode/extensions/github-authentication/src/common/keychain.ts\",\"/repo/lib/vscode/extensions/github-authentication/node_modules/vscode-nls/lib/main.js\",\"external \\\"keytar\\\"\",\"external \\\"https\\\"\",\"/repo/lib/vscode/extensions/github-authentication/src/common/utils.ts\",\"/repo/lib/vscode/extensions/github-authentication/src/common/clientRegistrar.ts\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"require\",\"vscode\",\"padLeft\",\"pad\",\"repeat\",\"Math\",\"max\",\"length\",\"Logger\",\"[object Object]\",\"this\",\"output\",\"window\",\"createOutputChannel\",\"data\",\"Error\",\"stack\",\"message\",\"success\",\"toString\",\"logLevel\",\"level\",\"appendLine\",\"now\",\"data2String\",\"Date\",\"getUTCHours\",\"getMinutes\",\"getUTCSeconds\",\"getMilliseconds\",\"default\",\"v1\",\"v4\",\"uuid\",\"crypto\",\"randomBytes\",\"byteToHex\",\"substr\",\"buf\",\"offset\",\"bth\",\"join\",\"https\",\"utils_1\",\"logger_1\",\"clientRegistrar_1\",\"uriHandler\",\"EventEmitter\",\"uri\",\"fire\",\"exchangeCodeForToken\",\"state\",\"clientDetails\",\"async\",\"resolve\",\"reject\",\"info\",\"query\",\"split\",\"reduce\",\"prev\",\"current\",\"queryString\",\"parseQuery\",\"code\",\"post\",\"request\",\"host\",\"path\",\"id\",\"secret\",\"method\",\"headers\",\"Accept\",\"result\",\"buffer\",\"on\",\"chunk\",\"push\",\"statusCode\",\"json\",\"JSON\",\"parse\",\"Buffer\",\"concat\",\"access_token\",\"statusMessage\",\"end\",\"err\",\"GitHubServer\",\"scopes\",\"callbackUri\",\"env\",\"asExternalUri\",\"Uri\",\"uriScheme\",\"getGitHubAppDetails\",\"getClientDetails\",\"encodeURIComponent\",\"openExternal\",\"promiseFromEvent\",\"event\",\"token\",\"Promise\",\"Authorization\",\"User-Agent\",\"hasInstallation\",\"installations\",\"some\",\"installation\",\"app_slug\",\"accountName\",\"login\",\"detailsString\",\"payload\",\"stringify\",\"from\",\"Content-Type\",\"Content-Length\",\"byteLength\",\"write\",\"github_1\",\"githubServer_1\",\"activate\",\"context\",\"subscriptions\",\"registerUriHandler\",\"loginService\",\"GitHubAuthenticationProvider\",\"initialize\",\"authentication\",\"registerAuthenticationProvider\",\"displayName\",\"onDidChangeSessions\",\"getSessions\",\"sessions\",\"scopeList\",\"session\",\"added\",\"removed\",\"changed\",\"e\",\"showErrorMessage\",\"error\",\"logout\",\"deactivate\",\"keychain_1\",\"_sessions\",\"_githubServer\",\"readSessions\",\"pollForChange\",\"setTimeout\",\"storedSessions\",\"forEach\",\"map\",\"sessionIndex\",\"findIndex\",\"splice\",\"keychain\",\"getToken\",\"getAccessToken\",\"accessToken\",\"sessionData\",\"all\",\"resolvedAccessToken\",\"setToken\",\"loginAndInstallApp\",\"tokenToSession\",\"hasUserInstallation\",\"installApp\",\"userInfo\",\"getUserInfo\",\"storeSessions\",\"revokeToken\",\"_nodeId\",\"_clockseq\",\"rng\",\"bytesToUuid\",\"_lastMSecs\",\"_lastNSecs\",\"options\",\"b\",\"node\",\"clockseq\",\"undefined\",\"seedBytes\",\"msecs\",\"getTime\",\"nsecs\",\"dt\",\"tl\",\"tmh\",\"Array\",\"rnds\",\"random\",\"ii\",\"localize\",\"loadMessageBundle\",\"__dirname\",\"SERVICE_ID\",\"ACCOUNT_ID\",\"Keychain\",\"keytar\",\"console\",\"log\",\"getKeytar\",\"setPassword\",\"troubleshooting\",\"getPassword\",\"deletePassword\",\"MessageFormat\",\"BundleFormat\",\"LocalizeInfo\",\"resolvedBundles\",\"isPseudo\",\"fs\",\"isDefined\",\"isString\",\"readJsonFileSync\",\"filename\",\"readFileSync\",\"format\",\"args\",\"replace\",\"match\",\"rest\",\"index\",\"arg\",\"replacement\",\"String\",\"createScopedLocalizeFunction\",\"messages\",\"_i\",\"arguments\",\"isNumber\",\"warn\",\"cacheBundle\",\"bundle\",\"loadNlsBundleOrCreateFromI18n\",\"header\",\"bundlePath\",\"cacheRoot\",\"hash\",\"useMemoryOnly\",\"writeBundle\",\"encoding\",\"flag\",\"file\",\"utimes\",\"touch\",\"SyntaxError\",\"unlink\",\"metaDataPath\",\"languagePackLocation\",\"translationsConfig\",\"languagePack\",\"contents\",\"metaData\",\"module_2\",\"entry\",\"translations\",\"outDir\",\"resultMessages\",\"keys\",\"messageKey\",\"translatedMessage\",\"createNLSBundle\",\"writeFileSync\",\"loadDefaultNlsBundle\",\"folder\",\"module_1\",\"createDefaultNlsBundle\",\"loadNlsBundle\",\"languagePackSupport\",\"languagePackId\",\"translationsConfigFile\",\"candidate\",\"root\",\"language\",\"existsSync\",\"lastIndexOf\",\"substring\",\"findInTheBoxBundle\",\"ext\",\"extname\",\"messageFormat\",\"both\",\"headerFile\",\"dirname\",\"parent\",\"tryFindMetaDataHeaderFile\",\"nlsBundle\",\"module_3\",\"resolvedLanguage\",\"cacheLanguageResolution\",\"locale\",\"resolveLanguage\",\"isArray\",\"is\",\"comment\",\"process\",\"VSCODE_NLS_CONFIG\",\"vscodeOptions_1\",\"availableLanguages\",\"toLowerCase\",\"isBoolean\",\"_languagePackSupport\",\"_cacheRoot\",\"_languagePackId\",\"_translationsConfigFile\",\"_corruptedFile\",\"exists\",\"writeFile\",\"_a\",\"initializeSettings\",\"config\",\"opts\",\"bundleFormat\",\"standalone\",\"filterEvent\",\"filter\",\"listener\",\"thisArgs\",\"disposables\",\"onceEvent\",\"dispose\",\"passthrough\",\"adapter\",\"subscription\",\"catch\",\"then\",\"vscode_1\",\"Registrar\",\"fileContents\",\"appRoot\",\"_config\",\"OSS\",\"INSIDERS\",\"STABLE\",\"EXPLORATION\",\"VSO\",\"VSO_PPE\",\"VSO_DEV\",\"GITHUB_APP\",\"details\",\"scheme\",\"authority\",\"ClientRegistrar\"],\"mappings\":\"6DACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,EAAAA,EAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,QAAAA,OAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,MAAAA,IACzC,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,GAAAA,EAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,EAAAA,EAAAmC,EAAA,mBClFAhC,EAAAD,QAAAkC,QAAA,yFCKA,MAAAC,EAAArC,EAAA,GA4CA,SAASsC,EAAQH,EAAWN,EAAWU,EAAM,KAC5C,OAAOA,EAAIC,OAAOC,KAAKC,IAAI,EAAGb,EAAIM,EAAEQ,SAAWR,EAGhD,MAAMS,EAAS,UAzCdC,cACCC,KAAKC,OAASV,EAAOW,OAAOC,oBAAoB,yBAGzCJ,YAAYK,GACnB,OAAIA,aAAgBC,MACZD,EAAKE,OAASF,EAAKG,SAEN,IAAjBH,EAAKI,SAAqBJ,EAAKG,QAC3BH,EAAKG,QAENH,EAAKK,WAGNV,KAAKQ,EAAiBH,GAC5BJ,KAAKU,SAAS,OAAQH,EAASH,GAGzBL,MAAMQ,EAAiBH,GAC7BJ,KAAKU,SAAS,QAASH,EAASH,GAG1BL,SAASY,EAAiBJ,EAAiBH,GACjDJ,KAAKC,OAAOW,eAAeD,QAAYX,KAAKa,UAAUN,KAClDH,GACHJ,KAAKC,OAAOW,WAAWZ,KAAKc,YAAYV,IAIlCL,MACP,MAAMc,EAAM,IAAIE,KAChB,OAAOvB,EAAQqB,EAAIG,cAAgB,GAAI,EAAG,KACvC,IAAMxB,EAAQqB,EAAII,aAAe,GAAI,EAAG,KACxC,IAAMzB,EAAQqB,EAAIK,gBAAkB,GAAI,EAAG,KAAO,IAAML,EAAIM,oBASjE/D,EAAAgE,QAAetB,iBCtDfzC,EAAAD,QAAAkC,QAAA,yBCAA,IAAA+B,EAAAnE,EAAA,IACAoE,EAAApE,EAAA,IAEAqE,EAAAD,EACAC,EAAAF,GAAAA,EACAE,EAAAD,GAAAA,EAEAjE,EAAAD,QAAAmE,mBCJA,IAAAC,EAAAtE,EAAA,IAEAG,EAAAD,QAAA,WACA,OAAAoE,EAAAC,YAAA,oBCDA,IADA,IAAAC,KACApE,EAAA,EAAeA,EAAA,MAASA,EACxBoE,EAAApE,IAAAA,EAAA,KAAAmD,SAAA,IAAAkB,OAAA,GAmBAtE,EAAAD,QAhBA,SAAAwE,EAAAC,GACA,IAAAvE,EAAAuE,GAAA,EACAC,EAAAJ,EAEA,OACAI,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MAAA,IACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MAAA,IACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MAAA,IACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MAAA,IACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,MACAwE,EAAAF,EAAAtE,MAAAwE,EAAAF,EAAAtE,OACAyE,KAAA,oBCtBA1E,EAAAD,QAAAkC,QAAA,wHCKA,MAAA0C,EAAA9E,EAAA,IACAqC,EAAArC,EAAA,GACAqE,EAAArE,EAAA,GACA+E,EAAA/E,EAAA,IACAgF,EAAAhF,EAAA,GACAiF,EAAAjF,EAAA,IAQaE,EAAAgF,WAAa,kBANI7C,EAAO8C,aAC7BtC,UAAUuC,GAChBtC,KAAKuC,KAAKD,KAMZ,MAAME,EACL,CAACC,EAAOC,IAAkBC,MAAOL,EAAKM,EAASC,KAC9CX,EAAAd,QAAO0B,KAAK,gCACZ,MAAMC,EAqCR,SAAoBT,GACnB,OAAOA,EAAIS,MAAMC,MAAM,KAAKC,OAAO,CAACC,EAAWC,KAC9C,MAAMC,EAAcD,EAAQH,MAAM,KAElC,OADAE,EAAKE,EAAY,IAAMA,EAAY,GAC5BF,OAzCOG,CAAWf,GACnBgB,EAAOP,EAAMO,KAEnB,GAAIP,EAAMN,QAAUA,EAEnB,YADAI,EAAO,6BAIR,MAAMU,EAAOvB,EAAMwB,SAClBC,KAAM,aACNC,4CAA6ChB,EAAciB,oBAAoBjB,EAAckB,gBAAgBb,EAAMN,cAAca,IACjIO,OAAQ,OACRC,SACCC,OAAQ,qBAEPC,IACF,MAAMC,KACND,EAAOE,GAAG,OAASC,IAClBF,EAAOG,KAAKD,KAEbH,EAAOE,GAAG,MAAO,KAChB,GAA0B,MAAtBF,EAAOK,WAAoB,CAC9B,MAAMC,EAAOC,KAAKC,MAAMC,OAAOC,OAAOT,GAAQxD,YAC9CyB,EAAAd,QAAO0B,KAAK,2BACZF,EAAQ0B,EAAKK,mBAEb9B,EAAO,IAAIxC,MAAM2D,EAAOY,oBAK3BrB,EAAKsB,MACLtB,EAAKW,GAAG,QAASY,IAChBjC,EAAOiC,MAYV1H,EAAA2H,mBACQhF,YAAYiF,GAClB9C,EAAAd,QAAO0B,KAAK,iBACZ,MAAML,EAAQlB,IACR0D,QAAoB1F,EAAO2F,IAAIC,cAAc5F,EAAO6F,IAAIZ,SAASjF,EAAO2F,IAAIG,8DAC5E3C,EAA2B,QAAXsC,EAAmB7C,EAAAf,QAAgBkE,sBAAwBnD,EAAAf,QAAgBmE,iBAAiBN,GAC5G3C,EAAM/C,EAAO6F,IAAIZ,+DAA+DgB,mBAAmBP,EAAYxE,qBAAqBuE,WAAgBvC,eAAmBC,EAAciB,MAG3L,OADApE,EAAO2F,IAAIO,aAAanD,GACjBL,EAAAyD,iBAAiBtI,EAAAgF,WAAWuD,MAAOnD,EAAqBC,EAAOC,IAGhE3C,0BAA0B6F,GAChC,OAAO,IAAIC,QAAQ,CAACjD,EAASC,KAC5BX,EAAAd,QAAO0B,KAAK,iCACZ,MAAMS,EAAOvB,EAAMwB,SAClBC,KAAM,iBACNC,KAAM,sBACNG,OAAQ,MACRC,SACCC,OAAQ,kDACR+B,uBAAwBF,IACxBG,aAAc,uBAEb/B,IACF,MAAMC,KACND,EAAOE,GAAG,OAASC,IAClBF,EAAOG,KAAKD,KAEbH,EAAOE,GAAG,MAAO,KAChB,GAA0B,MAAtBF,EAAOK,WAAoB,CAC9B,MAAMC,EAAOC,KAAKC,MAAMC,OAAOC,OAAOT,GAAQxD,YAC9CyB,EAAAd,QAAO0B,KAAK,0BACZ,MAAMkD,EAAkB1B,EAAK2B,cAAcC,KAAMC,GAAiE,iCAA1BA,EAAaC,UACrGxD,EAAQoD,QAERnD,EAAO,IAAIxC,MAAM2D,EAAOY,oBAK3BrB,EAAKsB,MACLtB,EAAKW,GAAG,QAASY,IAChBjC,EAAOiC,OAKH/E,mBACN,MAAM2C,EAAgBP,EAAAf,QAAgBkE,sBAChC7C,EAAQlB,IACRe,EAAM/C,EAAO6F,IAAIZ,sFAAsF/B,KAG7G,OADAlD,EAAO2F,IAAIO,aAAanD,GACjBL,EAAAyD,iBAAiBtI,EAAAgF,WAAWuD,MAAOnD,EAAqBC,EAAOC,IAGhE3C,kBAAkB6F,GACxB,OAAO,IAAIC,QAAQ,CAACjD,EAASC,KAC5BX,EAAAd,QAAO0B,KAAK,2BACZ,MAAMS,EAAOvB,EAAMwB,SAClBC,KAAM,iBACNC,KAAM,QACNG,OAAQ,MACRC,SACCgC,uBAAwBF,IACxBG,aAAc,uBAEb/B,IACF,MAAMC,KACND,EAAOE,GAAG,OAASC,IAClBF,EAAOG,KAAKD,KAEbH,EAAOE,GAAG,MAAO,KAChB,GAA0B,MAAtBF,EAAOK,WAAoB,CAC9B,MAAMC,EAAOC,KAAKC,MAAMC,OAAOC,OAAOT,GAAQxD,YAC9CyB,EAAAd,QAAO0B,KAAK,qBACZF,GAAUe,GAAIW,EAAKX,GAAI0C,YAAa/B,EAAKgC,aAEzCzD,EAAO,IAAIxC,MAAM2D,EAAOY,oBAK3BrB,EAAKsB,MACLtB,EAAKW,GAAG,QAASY,IAChBjC,EAAOiC,OAKH/E,kBAAkB6F,GACxB,OAAO,IAAIC,QAAQlD,MAAOC,EAASC,KAClC,MAAMoC,QAAoB1F,EAAO2F,IAAIC,cAAc5F,EAAO6F,IAAIZ,SAASjF,EAAO2F,IAAIG,8DAC5E3C,EAAgBP,EAAAf,QAAgBmE,iBAAiBN,GACjDsB,KAAmB7D,EAAciB,MAAMjB,EAAckB,SAErD4C,EAAUjC,KAAKkC,WAAY9B,aAAciB,IAE/C1D,EAAAd,QAAO0B,KAAK,qBACZ,MAAMS,EAAOvB,EAAMwB,SAClBC,KAAM,iBACNC,sBAAuBhB,EAAciB,WACrCE,OAAQ,SACRC,SACCgC,uBAAwBrB,OAAOiC,KAAKH,GAAe9F,SAAS,YAC5DsF,aAAc,qBACdY,eAAgB,mBAChBC,iBAAkBnC,OAAOoC,WAAWL,KAEnCxC,IACF,MAAMC,KACND,EAAOE,GAAG,OAASC,IAClBF,EAAOG,KAAKD,KAEbH,EAAOE,GAAG,MAAO,KACU,MAAtBF,EAAOK,YACVnC,EAAAd,QAAO0B,KAAK,kBACZF,KAEAC,EAAO,IAAIxC,MAAM2D,EAAOY,oBAK3BrB,EAAKuD,MAAMN,GACXjD,EAAKsB,MACLtB,EAAKW,GAAG,QAASY,IAChBjC,EAAOiC,uHC/LX,MAAAvF,EAAArC,EAAA,GACA6J,EAAA7J,EAAA,GACA8J,EAAA9J,EAAA,GACAgF,EAAAhF,EAAA,GAEAE,EAAA6J,SAAOtE,eAAwBuE,GAE9BA,EAAQC,cAAc/C,KAAK7E,EAAOW,OAAOkH,mBAAmBJ,EAAA5E,aAC5D,MAAMiF,EAAe,IAAIN,EAAAO,mCAEnBD,EAAaE,aAEnBhI,EAAOiI,eAAeC,gCACrB9D,GAAI,SACJ+D,YAAa,SACbC,oBAAqBZ,EAAAY,oBAAoBhC,MACzCiC,YAAa,IAAM/B,QAAQjD,QAAQyE,EAAaQ,UAChDvB,MAAO3D,MAAOmF,IACb,IACC,MAAMC,QAAgBV,EAAaf,MAAMwB,EAAU/F,KAAK,MAGxD,OAFAG,EAAAd,QAAO0B,KAAK,kBACZiE,EAAAY,oBAAoBpF,MAAOyF,OAAQD,EAAQpE,IAAKsE,WAAaC,aACtDH,EACN,MAAOI,GAGR,MAFA5I,EAAOW,OAAOkI,oCAAoCD,KAClDjG,EAAAd,QAAOiH,MAAMF,GACPA,IAGRG,OAAQ3F,MAAOgB,UACR0D,EAAaiB,OAAO3E,GAC1BoD,EAAAY,oBAAoBpF,MAAOyF,SAAWC,SAAUtE,GAAKuE,iBAQxD9K,EAAAmL,WAAA,wJCvCA,MAAAhJ,EAAArC,EAAA,GACAqE,EAAArE,EAAA,GACAsL,EAAAtL,EAAA,IACA8J,EAAA9J,EAAA,GACAgF,EAAAhF,EAAA,GAEaE,EAAAuK,oBAAsB,IAAIpI,EAAO8C,aAS9CjF,EAAAkK,mCAAAvH,cACSC,KAAAyI,aACAzI,KAAA0I,cAAgB,IAAI1B,EAAAjC,aAErBhF,mBACNC,KAAKyI,gBAAkBzI,KAAK2I,eAC5B3I,KAAK4I,gBAGE7I,gBACP8I,WAAWlG,UACV,MAAMmG,QAAuB9I,KAAK2I,eAE5BX,KACAC,KAENa,EAAeC,QAAQhB,IACE/H,KAAKyI,UAAUvC,KAAK7G,GAAKA,EAAEsE,KAAOoE,EAAQpE,MAGjE3D,KAAKyI,UAAUrE,KAAK2D,GACpBC,EAAM5D,KAAK2D,EAAQpE,OAIrB3D,KAAKyI,UAAUO,IAAIjB,IAGlB,IAFwBe,EAAe5C,KAAK7G,GAAKA,EAAEsE,KAAOoE,EAAQpE,IAE5C,CACrB,MAAMsF,EAAejJ,KAAKyI,UAAUS,UAAU7J,GAAKA,EAAEsE,KAAOoE,EAAQpE,IAChEsF,GAAgB,GACnBjJ,KAAKyI,UAAUU,OAAOF,EAAc,GAGrChB,EAAQ7D,KAAK2D,EAAQpE,QAInBqE,EAAMnI,QAAUoI,EAAQpI,SAC3BzC,EAAAuK,oBAAoBpF,MAAOyF,MAAAA,EAAOC,QAAAA,EAASC,aAG5ClI,KAAK4I,iBACH,KAGI7I,qBACP,MAAM+I,QAAuBN,EAAAY,SAASC,WACtC,GAAIP,EACH,IAEC,OADmCvE,KAAKC,MAAMsE,GAC3BE,IAAIjB,KAErBpE,GAAIoE,EAAQpE,GACZ0C,YAAa0B,EAAQ1B,YACrBrB,OAAQ+C,EAAQ/C,OAChBsE,eAAgB,IAAMzD,QAAQjD,QAAQmF,EAAQwB,gBAG/C,MAAOpB,GACRjG,EAAAd,QAAOiH,iCAAiCF,KAI1C,SAGOpI,sBACP,MAAMyJ,QAAmC3D,QAAQ4D,IAAIzJ,KAAKyI,UAAUO,IAAIrG,MAAMoF,IAC7E,MAAM2B,QAA4B3B,EAAQuB,iBAC1C,OACC3F,GAAIoE,EAAQpE,GACZ0C,YAAa0B,EAAQ1B,YACrBrB,OAAQ+C,EAAQ/C,OAChBuE,YAAaG,YAITlB,EAAAY,SAASO,SAASpF,KAAKkC,UAAU+C,IAGxC3B,eACC,OAAO7H,KAAKyI,UAGN1I,YAAYiF,GAClB,MAAMY,EAAmB,QAAXZ,QAAyBhF,KAAK4J,mBAAmB5E,SAAgBhF,KAAK0I,cAAcpC,MAAMtB,GAClG+C,QAAgB/H,KAAK6J,eAAejE,EAAOZ,EAAOhC,MAAM,MAE9D,aADMhD,KAAK2J,SAAS5B,GACbA,EAGDhI,yBAAyBiF,GAC/B,MAAMY,QAAc5F,KAAK0I,cAAcpC,MAAMtB,GAE7C,aADkChF,KAAK0I,cAAcoB,oBAAoBlE,GAEjEA,EAEA5F,KAAK0I,cAAcqB,aAIpBhK,qBAAqB6F,EAAeZ,GAC3C,MAAMgF,QAAiBhK,KAAK0I,cAAcuB,YAAYrE,GACtD,OACCjC,GAAIpC,IACJ+H,eAAgB,IAAMzD,QAAQjD,QAAQgD,GACtCS,YAAa2D,EAAS3D,YACtBrB,OAAQA,GAGFjF,eAAegI,GACtB,MAAMkB,EAAejJ,KAAKyI,UAAUS,UAAU7J,GAAKA,EAAEsE,KAAOoE,EAAQpE,IAChEsF,GAAgB,EACnBjJ,KAAKyI,UAAUU,OAAOF,EAAc,EAAGlB,GAEvC/H,KAAKyI,UAAUrE,KAAK2D,GAGrB/H,KAAKkK,gBAGCnK,aAAa4D,GACnB,MAAMsF,EAAejJ,KAAKyI,UAAUS,UAAUnB,GAAWA,EAAQpE,KAAOA,GACxE,GAAIsF,GAAgB,EAAG,CACtB,MAAMlB,EAAU/H,KAAKyI,UAAUU,OAAOF,EAAc,GAAG,GACjDrD,QAAcmC,EAAQuB,uBACtBtJ,KAAK0I,cAAcyB,YAAYvE,GAGtC5F,KAAKkK,mCCtJP,IAQAE,EACAC,EATAC,EAAApN,EAAA,GACAqN,EAAArN,EAAA,GAWAsN,EAAA,EACAC,EAAA,EA+FApN,EAAAD,QA5FA,SAAAsN,EAAA9I,EAAAC,GACA,IAAAvE,EAAAsE,GAAAC,GAAA,EACA8I,EAAA/I,MAGAgJ,GADAF,EAAAA,OACAE,MAAAR,EACAS,OAAAC,IAAAJ,EAAAG,SAAAH,EAAAG,SAAAR,EAKA,GAAA,MAAAO,GAAA,MAAAC,EAAA,CACA,IAAAE,EAAAT,IACA,MAAAM,IAEAA,EAAAR,GACA,EAAAW,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAGA,MAAAF,IAEAA,EAAAR,EAAA,OAAAU,EAAA,IAAA,EAAAA,EAAA,KAQA,IAAAC,OAAAF,IAAAJ,EAAAM,MAAAN,EAAAM,OAAA,IAAAjK,MAAAkK,UAIAC,OAAAJ,IAAAJ,EAAAQ,MAAAR,EAAAQ,MAAAT,EAAA,EAGAU,EAAAH,EAAAR,GAAAU,EAAAT,GAAA,IAcA,GAXAU,EAAA,QAAAL,IAAAJ,EAAAG,WACAA,EAAAA,EAAA,EAAA,QAKAM,EAAA,GAAAH,EAAAR,SAAAM,IAAAJ,EAAAQ,QACAA,EAAA,GAIAA,GAAA,IACA,MAAA,IAAA7K,MAAA,mDAGAmK,EAAAQ,EACAP,EAAAS,EACAb,EAAAQ,EAMA,IAAAO,GAAA,KAAA,WAHAJ,GAAA,cAGAE,GAAA,WACAP,EAAArN,KAAA8N,IAAA,GAAA,IACAT,EAAArN,KAAA8N,IAAA,GAAA,IACAT,EAAArN,KAAA8N,IAAA,EAAA,IACAT,EAAArN,KAAA,IAAA8N,EAGA,IAAAC,EAAAL,EAAA,WAAA,IAAA,UACAL,EAAArN,KAAA+N,IAAA,EAAA,IACAV,EAAArN,KAAA,IAAA+N,EAGAV,EAAArN,KAAA+N,IAAA,GAAA,GAAA,GACAV,EAAArN,KAAA+N,IAAA,GAAA,IAGAV,EAAArN,KAAAuN,IAAA,EAAA,IAGAF,EAAArN,KAAA,IAAAuN,EAGA,IAAA,IAAA9L,EAAA,EAAiBA,EAAA,IAAOA,EACxB4L,EAAArN,EAAAyB,GAAA6L,EAAA7L,GAGA,OAAA6C,GAAA2I,EAAAI,mBCzGAtN,EAAAD,QAAAkC,QAAA,2BCAA,IAAAgL,EAAApN,EAAA,GACAqN,EAAArN,EAAA,GA2BAG,EAAAD,QAzBA,SAAAsN,EAAA9I,EAAAC,GACA,IAAAvE,EAAAsE,GAAAC,GAAA,EAEA,iBAAA,IACAD,EAAA,WAAA8I,EAAA,IAAAY,MAAA,IAAA,KACAZ,EAAA,MAIA,IAAAa,GAFAb,EAAAA,OAEAc,SAAAd,EAAAJ,KAAAA,KAOA,GAJAiB,EAAA,GAAA,GAAAA,EAAA,GAAA,GACAA,EAAA,GAAA,GAAAA,EAAA,GAAA,IAGA3J,EACA,IAAA,IAAA6J,EAAA,EAAoBA,EAAA,KAASA,EAC7B7J,EAAAtE,EAAAmO,GAAAF,EAAAE,GAIA,OAAA7J,GAAA2I,EAAAgB,gHCjBA,MAAAhM,EAAArC,EAAA,GACAgF,EAAAhF,EAAA,GAGMwO,EAFNxO,EAAA,IAEqByO,kBAAiBzO,EAAA,GAAA6E,KAAA6J,UAAA,uBAkBtC,MAAMC,KAAgBtM,EAAO2F,IAAIG,yBAC3ByG,EAAa,gBAENC,EAGZhM,cACC,MAAMiM,EAvBR,WACC,IACC,OAAO9O,EAAQ,IACd,MAAO4H,GACRmH,QAAQC,IAAIpH,IAmBGqH,GACf,IAAKH,EACJ,MAAM,IAAI3L,MAAM,+BAGjBL,KAAKgM,OAASA,EAGfjM,eAAe6F,GACd,IACC,aAAa5F,KAAKgM,OAAOI,YAAYP,EAAYC,EAAYlG,GAC5D,MAAOuC,GAERjG,EAAAd,QAAOiH,+BAA+BF,KACtC,MAAMkE,EAAkBX,EAAS,EAAmB,YAC/BnM,EAAOW,OAAOkI,iBAAiBsD,EAAS,EAAsB,KAAsEvD,EAAE5H,SAAU8L,KACtJA,GACd9M,EAAO2F,IAAIO,aAAalG,EAAO6F,IAAIZ,MAAM,8FAK5CzE,iBACC,IACC,aAAaC,KAAKgM,OAAOM,YAAYT,EAAYC,GAChD,MAAO3D,GAGR,OADAjG,EAAAd,QAAOiH,+BAA+BF,KAC/BtC,QAAQjD,aAAQkI,IAIzB/K,oBACC,IACC,aAAaC,KAAKgM,OAAOO,eAAeV,EAAYC,GACnD,MAAO3D,GAGR,OADAjG,EAAAd,QAAOiH,gCAAgCF,KAChCtC,QAAQjD,aAAQkI,KA1C1B1N,EAAA2O,SAAAA,EA+Ca3O,EAAAgM,SAAW,IAAI2C,gCC3E5B/N,OAAAC,eAAAb,EAAA,cAA8CmB,OAAA,IAC9C,IAkBAiO,EAMAC,EAMAC,EASAC,EACAjC,EACAkC,EAzCAlJ,EAAAxG,EAAA,GACA2P,EAAA3P,EAAA,GACAuD,EAAAzC,OAAAkB,UAAAuB,SACA,SAAAqM,EAAAvO,GACA,YAAA,IAAAA,EAKA,SAAAwO,EAAAxO,GACA,MAAA,oBAAAkC,EAAAhD,KAAAc,GAKA,SAAAyO,EAAAC,GACA,OAAA1I,KAAAC,MAAAqI,EAAAK,aAAAD,EAAA,SA0FA,SAAAE,EAAA5M,EAAA6M,GAuBA,OArBAR,IAEArM,EAAA,IAAAA,EAAA8M,QAAA,WAAA,QAAA,KAEA,IAAAD,EAAAvN,OACAU,EAGAA,EAAA8M,QAAA,aAA2C,SAAAC,EAAAC,GAC3C,IAAAC,EAAAD,EAAA,GACAE,EAAAL,EAAAI,GACAE,EAAAJ,EAOA,MANA,iBAAAG,EACAC,EAAAD,EAEA,iBAAAA,GAAA,kBAAAA,QAAA,IAAAA,GAAA,OAAAA,IACAC,EAAAC,OAAAF,IAEAC,IAKA,SAAAE,EAAAC,GACA,OAAA,SAAAhP,EAAA0B,GAEA,IADA,IAAA6M,KACAU,EAAA,EAAwBA,EAAAC,UAAAlO,OAAuBiO,IAC/CV,EAAAU,EAAA,GAAAC,UAAAD,GAEA,OAnIA,SAAAvP,GACA,MAAA,oBAAAkC,EAAAhD,KAAAc,GAkIAyP,CAAAnP,GACAA,GAAAgP,EAAAhO,YACAoM,QAAA5D,MAAA,qEAAA,IAAAhI,MAAA,IAAAC,OAGA6M,EAAAU,EAAAhP,GAAAuO,GAGAL,EAAAxM,IACA0L,QAAAgC,KAAA,WAAA1N,EAAA,uCACA4M,EAAA5M,EAAA6M,SAGAnB,QAAA5D,MAAA,gDAAA,IAAAhI,MAAA,IAAAC,QAKA,SAAAoL,EAAA7M,EAAA0B,GAEA,IADA,IAAA6M,KACAU,EAAA,EAAoBA,EAAAC,UAAAlO,OAAuBiO,IAC3CV,EAAAU,EAAA,GAAAC,UAAAD,GAEA,OAAAX,EAAA5M,EAAA6M,GAgIA,SAAAc,EAAArP,EAAAsP,GAEA,OADAxB,EAAA9N,GAAAsP,EACAA,EAEA,SAAAC,EAAAC,EAAAC,GACA,IAAAtK,EACAmK,EAAAzK,EAAA3B,KAAA2I,EAAA6D,UAAAF,EAAA1K,GAAA,IAAA0K,EAAAG,KAAA,SACAC,GAAA,EACAC,GAAA,EACA,IAGA,OAFA1K,EAAAO,KAAAC,MAAAqI,EAAAK,aAAAiB,GAAqDQ,SAAA,OAAAC,KAAA,OAhBrD,SAAAC,GACA,IAAAjR,EAAA,IAAAmD,KACA8L,EAAAiC,OAAAD,EAAAjR,EAAAA,EAAA,cAeAmR,CAAAZ,GACAnK,EAEA,MAAAc,GACA,GAAA,WAAAA,EAAAxB,KACAoL,GAAA,MAEA,CAAA,KAAA5J,aAAAkK,aAWA,MAAAlK,EATAmH,QAAAC,IAAA,wCAAApH,EAAAvE,QAAA,KACAsM,EAAAoC,OAAAd,EAAA,SAAArJ,GACAA,GACAmH,QAAA5D,MAAA,6BAAA8F,EAAA,cAGAM,GAAA,GAOA,KADAzK,EApEA,SAAAqK,EAAAa,GACA,IAAAC,EAAAzE,EAAA0E,mBAAAf,EAAA1K,IACA,GAAAwL,EAAA,CAGA,IAAAE,EAAArC,EAAAmC,GAAAG,SACAC,EAAAvC,EAAAtJ,EAAA3B,KAAAmN,EAAA,sBACAlL,EAAAhG,OAAAY,OAAA,MACA,IAAA,IAAA4Q,KAAAD,EAAA,CACA,IAAAE,EAAAF,EAAAC,GACAE,EAAAL,EAAAhB,EAAAsB,OAAA,IAAAH,GACA,GAAAE,EAAA,CAEA,IADA,IAAAE,KACAtS,EAAA,EAA2BA,EAAAmS,EAAAI,KAAAhQ,OAAuBvC,IAAA,CAClD,IAAAwS,EAAAL,EAAAI,KAAAvS,GAEAyS,EAAAL,EADA3C,EAAA+C,GAAAA,EAAAA,EAAAjR,UAEAiM,IAAAiF,IACAA,EAAAN,EAAA5B,SAAAvQ,IAEAsS,EAAAxL,KAAA2L,GAEA/L,EAAAwL,GAAAI,OAGA5L,EAAAwL,GAAAC,EAAA5B,SAGA,OAAA7J,GAwCAgM,CAAA3B,EAAAC,KACAG,EACA,OAAAzK,EAEA,GAAA0K,EACA,IACA7B,EAAAoD,cAAA9B,EAAA5J,KAAAkC,UAAAzC,IAA8D2K,SAAA,OAAAC,KAAA,OAE9D,MAAA9J,GACA,GAAA,WAAAA,EAAAxB,KACA,OAAAU,EAEA,MAAAc,EAGA,OAAAd,EAEA,SAAAkM,EAAA5B,GACA,IACA,OAhGA,SAAA6B,GACA,IAAAZ,EAAAvC,EAAAtJ,EAAA3B,KAAAoO,EAAA,sBACAnM,EAAAhG,OAAAY,OAAA,MACA,IAAA,IAAAwR,KAAAb,EAAA,CACA,IAAAE,EAAAF,EAAAa,GACApM,EAAAoM,GAAAX,EAAA5B,SAEA,OAAA7J,EAyFAqM,CAAA/B,GAEA,MAAAxJ,GAEA,YADAmH,QAAAC,IAAA,mDAAApH,IAIA,SAAAwL,EAAAjC,EAAAC,GACA,IAAAtK,EAEA,IAtPA,IAAA0G,EAAA6F,0BAAAzF,IAAAJ,EAAA6D,gBAAAzD,IAAAJ,EAAA8F,qBAAA1F,IAAAJ,EAAA+F,6BACA3F,IAAAJ,EAAA0E,mBAsPA,IACApL,EAAAoK,EAAAC,EAAAC,GAEA,MAAAxJ,GACAmH,QAAAC,IAAA,gCAAApH,GAGA,IAAAd,EAAA,CAIA,GAAA0G,EAAA6F,oBACA,OAAAL,EAAA5B,GAEA,IAAAoC,EAvKA,SAAAC,GAEA,IADA,IAAAC,EAAAlG,EAAAkG,SACAA,GAAA,CACA,IAAAF,EAAAhN,EAAA3B,KAAA4O,EAAA,cAAAC,EAAA,SACA,GAAA/D,EAAAgE,WAAAH,GACA,OAAAA,EAGA,IAAAlD,EAAAoD,EAAAE,YAAA,KAEAF,EADApD,EAAA,EACAoD,EAAAG,UAAA,EAAAvD,QAGA1C,EAKA,QAAAA,IAAA8F,IACAF,EAAAhN,EAAA3B,KAAA4O,EAAA,mBACA9D,EAAAgE,WAAAH,IACA,OAAAA,EAkJAM,CAAA1C,GACA,GAAAoC,EACA,IACA,OAAA1D,EAAA0D,GAEA,MAAA5L,GACAmH,QAAAC,IAAA,4CAAApH,GAGAd,EAAAkM,EAAA5B,GAEA,OAAAtK,EAqBA,SAAA2H,EAAAkD,GACA,IAAAA,EAGA,OAAAnD,EAGA,IAAAuF,EAAAvN,EAAAwN,QAAArC,GAIA,GAHAoC,IACApC,EAAAA,EAAAlN,OAAA,EAAAkN,EAAAhP,OAAAoR,EAAApR,SAEA6K,EAAAyG,gBAAA3E,EAAA4E,MAAA1G,EAAAyG,gBAAA3E,EAAA2B,OAAA,CACA,IAAAkD,EA/BA,SAAAxC,GAGA,IAFA,IAAA7K,EACAsN,EAAA5N,EAAA4N,QAAAzC,GAEA7K,EAAAN,EAAA3B,KAAAuP,EAAA,6BACAzE,EAAAgE,WAAA7M,IAFA,CAKA,IAAAuN,EAAA7N,EAAA4N,QAAAA,GACA,GAAAC,IAAAD,EAAA,CACAtN,OAAA8G,EACA,MAGAwG,EAAAC,EAGA,OAAAvN,EAcAwN,CAAA3C,GACA,GAAAwC,EAAA,CACA,IAAA/C,EAAA5K,EAAA4N,QAAAD,GACAlD,EAAAxB,EAAA2B,GACA,QAAAxD,IAAAqD,EACA,IACA,IAAAE,EAAA9J,KAAAC,MAAAqI,EAAAK,aAAAmE,EAAA,SACA,IACA,IAAAI,EAAAnB,EAAAjC,EAAAC,GACAH,EAAAD,EAAAI,EAAAmD,GAAsEpD,OAAAA,EAAAoD,UAAAA,GAAuC,MAE7G,MAAA3M,GACAmH,QAAA5D,MAAA,4BAAAvD,GACAqJ,EAAAD,EAAAI,EAAA,OAGA,MAAAxJ,GACAmH,QAAA5D,MAAA,6BAAAvD,GACAqJ,EAAAD,EAAAI,EAAA,MAGA,GAAAH,EAAA,CACA,IAAAuD,EAAA7C,EAAAlN,OAAA2M,EAAAzO,OAAA,GAAAwN,QAAA,MAAA,KACAQ,EAAAM,EAAAsD,UAAAC,GACA,YAAA5G,IAAA+C,GACA5B,QAAA5D,MAAA,qBAAAwG,EAAA,wCACA,WACA,MAAA,wBAGAjB,EAAAC,KAIA,GAAAnD,EAAAyG,gBAAA3E,EAAA4E,MAAA1G,EAAAyG,gBAAA3E,EAAAqC,KAEA,IACA,IAAAvK,EAAA0I,EA3RA,SAAA6B,GACA,IAAA8C,EACA,GAAAjH,EAAAkH,yBAAAD,EACAA,EAAAA,MAEA,CACA,GAAA/E,IAAAlC,EAAAkG,SACAe,EAAA,iBAIA,IADA,IAAAE,EAAAnH,EAAAkG,SACAiB,GAAA,CACA,IAAAnB,EAAA,QAAAmB,EAAA,QACA,GAAAhF,EAAAgE,WAAAhC,EAAA6B,GAAA,CACAiB,EAAAjB,EACA,MAGA,IAAAlD,EAAAqE,EAAAf,YAAA,KACAtD,EAAA,EACAqE,EAAAA,EAAAd,UAAA,EAAAvD,IAGAmE,EAAA,YACAE,EAAA,MAKAnH,EAAAkH,0BACAD,EAAAA,GAGA,OAAA9C,EAAA8C,EA0PAG,CAAAjD,IACA,OAAAvD,MAAAyG,QAAAzN,GACAsJ,EAAAtJ,GAGAwI,EAAAxI,EAAAuJ,WAAAf,EAAAxI,EAAAuL,MACAjC,EAAAtJ,EAAAuJ,WAGA5B,QAAA5D,MAAA,kBAAAwG,EAAA,iCACA,WACA,MAAA,gEAKA,MAAA/J,GACA,WAAAA,EAAAxB,MACA2I,QAAA5D,MAAA,oCAAAvD,GAKA,OADAmH,QAAA5D,MAAA,0CAAAwG,GACA,WACA,MAAA,4DAlcA,SAAArC,GACAA,EAAA,KAAA,OACAA,EAAA,OAAA,SACAA,EAAA,KAAA,OAHA,CAICA,EAAApP,EAAAoP,gBAAApP,EAAAoP,mBAED,SAAAC,GAEAA,EAAA,WAAA,aACAA,EAAA,aAAA,eAHA,CAICA,EAAArP,EAAAqP,eAAArP,EAAAqP,kBAED,SAAAC,GAKAA,EAAAsF,GAJA,SAAAzT,GACA,IAAAmS,EAAAnS,EACA,OAAAmS,GAAA5D,EAAA4D,EAAA7R,MAAAiO,EAAA4D,EAAAuB,UAHA,CAMCvF,IAAAA,OAKD,WAEA,GADAhC,GAAemH,YAAA/G,EAAA8F,cAAA9F,EAAAyF,qBAAA,EAAAqB,yBAAA,EAAAT,cAAA3E,EAAA2B,QACfpB,EAAAmF,QAAAhN,IAAAiN,mBACA,IACA,IAAAC,EAAA7N,KAAAC,MAAA0N,QAAAhN,IAAAiN,mBACAvB,OAAA,EAEA,GAAAwB,EAAAC,mBAAA,CACA,IAAA9T,EAAA6T,EAAAC,mBAAA,KACAtF,EAAAxO,KACAqS,EAAArS,GAqBA,GAlBAwO,EAAAqF,EAAAP,UACAnH,EAAAmH,OAAAO,EAAAP,OAAAS,oBAEAxH,IAAA8F,EACAlG,EAAAkG,SAAAlG,EAAAmH,OAEA,OAAAjB,IACAlG,EAAAkG,SAAAA,GAlDA,SAAArS,GACA,OAAA,IAAAA,IAAA,IAAAA,EAmDAgU,CAAAH,EAAAI,wBACA9H,EAAA6F,oBAAA6B,EAAAI,sBAEAzF,EAAAqF,EAAAK,cACA/H,EAAA6D,UAAA6D,EAAAK,YAEA1F,EAAAqF,EAAAM,mBACAhI,EAAA8F,eAAA4B,EAAAM,iBAEA3F,EAAAqF,EAAAO,yBAAA,CACAjI,EAAA+F,uBAAA2B,EAAAO,wBACA,IACAjI,EAAA0E,mBAAApC,EAAAtC,EAAA+F,wBAEA,MAAApI,GAEA,GAAA+J,EAAAQ,eAAA,CACA,IAAAtB,EAAA5N,EAAA4N,QAAAc,EAAAQ,gBACA/F,EAAAgG,OAAAvB,EAAA,SAAAuB,GACAA,GACAhG,EAAAiG,UAAAV,EAAAQ,eAAA,YAAA,OAAA,SAAA9N,GACAmH,QAAA5D,MAAAvD,UAQA,MAAAiO,IAIAnG,EAAA,WAAAlC,EAAAmH,YACA/G,EACA6B,EAAA3O,OAAAY,OAAA,MAEAoU,GAmXA5V,EAAAuO,kBAAAA,EAmBAvO,EAAA6V,OAlBA,SAAAC,GAgBA,OAfAA,IACAnG,EAAAmG,EAAArB,UACAnH,EAAAmH,OAAAqB,EAAArB,OAAAS,cACA5H,EAAAkG,SAAAlG,EAAAmH,YACA/G,EACA6B,EAAA3O,OAAAY,OAAA,YAEAkM,IAAAoI,EAAA/B,gBACAzG,EAAAyG,cAAA+B,EAAA/B,eAEA+B,EAAAC,eAAA1G,EAAA2G,aAAA,IAAA1I,EAAA6F,sBACA7F,EAAA6F,qBAAA,IAGA3D,EAAA,WAAAlC,EAAAmH,OACAlG,kBC/eAtO,EAAAD,QAAAkC,QAAA,yBCAAjC,EAAAD,QAAAkC,QAAA,4ICOAlC,EAAAiW,YAAA,SAA+B1N,EAAiB2N,GAC/C,MAAO,CAACC,EAAUC,EAAW,KAAMC,IAAiB9N,EAAMwC,GAAKmL,EAAOnL,IAAMoL,EAAS9V,KAAK+V,EAAUrL,GAAI,KAAMsL,IAG/GrW,EAAAsW,UAAA,SAA6B/N,GAC5B,MAAO,CAAC4N,EAAUC,EAAW,KAAMC,KAClC,MAAMzP,EAAS2B,EAAMwC,IACpBnE,EAAO2P,UACAJ,EAAS9V,KAAK+V,EAAUrL,IAC7B,KAAMsL,GAET,OAAOzP,IAeT,MAAM4P,EAAc,CAACrV,EAAYqE,IAAmCA,EAAQrE,GAgB5EnB,EAAAsI,iBAAO/C,eACNgD,EACAkO,EAAgCD,GAChC,IAAIE,EACJ,OAAO,IAAIjO,QAAW,CAACjD,EAASC,IAC/BiR,EAAenO,EAAOpH,IACrB,IACCsH,QAAQjD,QAAQiR,EAAQtV,EAAOqE,EAASC,IACtCkR,MAAMlR,GACP,MAAOwF,GACRxF,EAAOwF,OAGR2L,KACAhQ,IACA8P,EAAaH,UACN3P,GAERqE,IAEC,MADAyL,EAAaH,UACPtL,uGChET,MAAA4L,EAAA/W,EAAA,GACA2P,EAAA3P,EAAA,GACAwG,EAAAxG,EAAA,SAoBagX,EAGZnU,cACC,IACC,MAAMoU,EAAetH,EAAGK,aAAaxJ,EAAK3B,KAAKkS,EAAA/O,IAAIkP,QAAS,4DAA4D3T,WACxHT,KAAKqU,QAAU9P,KAAKC,MAAM2P,GACzB,MAAOhM,GACRnI,KAAKqU,SACJC,OACAC,YACAC,UACAC,eACAC,OACAC,WACAC,WACAC,gBAKH9U,sBACC,IAAKC,KAAKqU,QAAQQ,WAAWlR,KAAO3D,KAAKqU,QAAQQ,WAAWjR,OAC3D,MAAM,IAAIvD,MAAM,gDAGjB,OAAOL,KAAKqU,QAAQQ,WAGrB9U,iBAAiBkF,GAChB,IAAI6P,EACJ,OAAQ7P,EAAY8P,QACnB,IAAK,WACJD,EAAU9U,KAAKqU,QAAQC,IACvB,MAED,IAAK,kBACJQ,EAAU9U,KAAKqU,QAAQE,SACvB,MAED,IAAK,SACJO,EAAU9U,KAAKqU,QAAQG,OACvB,MAED,IAAK,qBACJM,EAAU9U,KAAKqU,QAAQI,YACvB,MAED,IAAK,QACJ,OAAQxP,EAAY+P,WACnB,IAAK,0BACJF,EAAU9U,KAAKqU,QAAQK,IACvB,MACD,IAAK,6CACJI,EAAU9U,KAAKqU,QAAQM,QACvB,MACD,IAAK,6CACJG,EAAU9U,KAAKqU,QAAQO,QAI1B,QACC,MAAM,IAAIvU,+BAA+B4E,KAG3C,IAAK6P,EAAQnR,KAAOmR,EAAQlR,OAC3B,MAAM,IAAIvD,+CAA+C4E,KAG1D,OAAO6P,GArET1X,EAAA8W,UAAAA,EAyEA,MAAMe,EAAkB,IAAIf,EAC5B9W,EAAAgE,QAAe6T\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 8);\\n\",\"module.exports = require(\\\"vscode\\\");\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport * as vscode from 'vscode';\\n\\ntype LogLevel = 'Trace' | 'Info' | 'Error';\\n\\nclass Log {\\n\\tprivate output: vscode.OutputChannel;\\n\\n\\tconstructor() {\\n\\t\\tthis.output = vscode.window.createOutputChannel('GitHub Authentication');\\n\\t}\\n\\n\\tprivate data2String(data: any): string {\\n\\t\\tif (data instanceof Error) {\\n\\t\\t\\treturn data.stack || data.message;\\n\\t\\t}\\n\\t\\tif (data.success === false && data.message) {\\n\\t\\t\\treturn data.message;\\n\\t\\t}\\n\\t\\treturn data.toString();\\n\\t}\\n\\n\\tpublic info(message: string, data?: any): void {\\n\\t\\tthis.logLevel('Info', message, data);\\n\\t}\\n\\n\\tpublic error(message: string, data?: any): void {\\n\\t\\tthis.logLevel('Error', message, data);\\n\\t}\\n\\n\\tpublic logLevel(level: LogLevel, message: string, data?: any): void {\\n\\t\\tthis.output.appendLine(`[${level}  - ${this.now()}] ${message}`);\\n\\t\\tif (data) {\\n\\t\\t\\tthis.output.appendLine(this.data2String(data));\\n\\t\\t}\\n\\t}\\n\\n\\tprivate now(): string {\\n\\t\\tconst now = new Date();\\n\\t\\treturn padLeft(now.getUTCHours() + '', 2, '0')\\n\\t\\t\\t+ ':' + padLeft(now.getMinutes() + '', 2, '0')\\n\\t\\t\\t+ ':' + padLeft(now.getUTCSeconds() + '', 2, '0') + '.' + now.getMilliseconds();\\n\\t}\\n}\\n\\nfunction padLeft(s: string, n: number, pad = ' ') {\\n\\treturn pad.repeat(Math.max(0, n - s.length)) + s;\\n}\\n\\nconst Logger = new Log();\\nexport default Logger;\\n\",\"module.exports = require(\\\"path\\\");\",\"var v1 = require('./v1');\\nvar v4 = require('./v4');\\n\\nvar uuid = v4;\\nuuid.v1 = v1;\\nuuid.v4 = v4;\\n\\nmodule.exports = uuid;\\n\",\"// Unique ID creation requires a high quality random # generator.  In node.js\\n// this is pretty straight-forward - we use the crypto API.\\n\\nvar crypto = require('crypto');\\n\\nmodule.exports = function nodeRNG() {\\n  return crypto.randomBytes(16);\\n};\\n\",\"/**\\n * Convert array of 16 byte values to UUID string format of the form:\\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\\n */\\nvar byteToHex = [];\\nfor (var i = 0; i < 256; ++i) {\\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\\n}\\n\\nfunction bytesToUuid(buf, offset) {\\n  var i = offset || 0;\\n  var bth = byteToHex;\\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\\n  return ([\\n    bth[buf[i++]], bth[buf[i++]],\\n    bth[buf[i++]], bth[buf[i++]], '-',\\n    bth[buf[i++]], bth[buf[i++]], '-',\\n    bth[buf[i++]], bth[buf[i++]], '-',\\n    bth[buf[i++]], bth[buf[i++]], '-',\\n    bth[buf[i++]], bth[buf[i++]],\\n    bth[buf[i++]], bth[buf[i++]],\\n    bth[buf[i++]], bth[buf[i++]]\\n  ]).join('');\\n}\\n\\nmodule.exports = bytesToUuid;\\n\",\"module.exports = require(\\\"fs\\\");\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport * as https from 'https';\\nimport * as vscode from 'vscode';\\nimport * as uuid from 'uuid';\\nimport { PromiseAdapter, promiseFromEvent } from './common/utils';\\nimport Logger from './common/logger';\\nimport ClientRegistrar, { ClientDetails } from './common/clientRegistrar';\\n\\nclass UriEventHandler extends vscode.EventEmitter<vscode.Uri> implements vscode.UriHandler {\\n\\tpublic handleUri(uri: vscode.Uri) {\\n\\t\\tthis.fire(uri);\\n\\t}\\n}\\n\\nexport const uriHandler = new UriEventHandler;\\n\\nconst exchangeCodeForToken: (state: string, clientDetails: ClientDetails) => PromiseAdapter<vscode.Uri, string> =\\n\\t(state, clientDetails) => async (uri, resolve, reject) => {\\n\\t\\tLogger.info('Exchanging code for token...');\\n\\t\\tconst query = parseQuery(uri);\\n\\t\\tconst code = query.code;\\n\\n\\t\\tif (query.state !== state) {\\n\\t\\t\\treject('Received mismatched state');\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst post = https.request({\\n\\t\\t\\thost: 'github.com',\\n\\t\\t\\tpath: `/login/oauth/access_token?client_id=${clientDetails.id}&client_secret=${clientDetails.secret}&state=${query.state}&code=${code}`,\\n\\t\\t\\tmethod: 'POST',\\n\\t\\t\\theaders: {\\n\\t\\t\\t\\tAccept: 'application/json'\\n\\t\\t\\t}\\n\\t\\t}, result => {\\n\\t\\t\\tconst buffer: Buffer[] = [];\\n\\t\\t\\tresult.on('data', (chunk: Buffer) => {\\n\\t\\t\\t\\tbuffer.push(chunk);\\n\\t\\t\\t});\\n\\t\\t\\tresult.on('end', () => {\\n\\t\\t\\t\\tif (result.statusCode === 200) {\\n\\t\\t\\t\\t\\tconst json = JSON.parse(Buffer.concat(buffer).toString());\\n\\t\\t\\t\\t\\tLogger.info('Token exchange success!');\\n\\t\\t\\t\\t\\tresolve(json.access_token);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\treject(new Error(result.statusMessage));\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\t\\t});\\n\\n\\t\\tpost.end();\\n\\t\\tpost.on('error', err => {\\n\\t\\t\\treject(err);\\n\\t\\t});\\n\\t};\\n\\nfunction parseQuery(uri: vscode.Uri) {\\n\\treturn uri.query.split('&').reduce((prev: any, current) => {\\n\\t\\tconst queryString = current.split('=');\\n\\t\\tprev[queryString[0]] = queryString[1];\\n\\t\\treturn prev;\\n\\t}, {});\\n}\\n\\nexport class GitHubServer {\\n\\tpublic async login(scopes: string): Promise<string> {\\n\\t\\tLogger.info('Logging in...');\\n\\t\\tconst state = uuid();\\n\\t\\tconst callbackUri = await vscode.env.asExternalUri(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.github-authentication/did-authenticate`));\\n\\t\\tconst clientDetails = scopes === 'vso' ? ClientRegistrar.getGitHubAppDetails() : ClientRegistrar.getClientDetails(callbackUri);\\n\\t\\tconst uri = vscode.Uri.parse(`https://github.com/login/oauth/authorize?redirect_uri=${encodeURIComponent(callbackUri.toString())}&scope=${scopes}&state=${state}&client_id=${clientDetails.id}`);\\n\\n\\t\\tvscode.env.openExternal(uri);\\n\\t\\treturn promiseFromEvent(uriHandler.event, exchangeCodeForToken(state, clientDetails));\\n\\t}\\n\\n\\tpublic async hasUserInstallation(token: string): Promise<boolean> {\\n\\t\\treturn new Promise((resolve, reject) => {\\n\\t\\t\\tLogger.info('Getting user installations...');\\n\\t\\t\\tconst post = https.request({\\n\\t\\t\\t\\thost: 'api.github.com',\\n\\t\\t\\t\\tpath: `/user/installations`,\\n\\t\\t\\t\\tmethod: 'GET',\\n\\t\\t\\t\\theaders: {\\n\\t\\t\\t\\t\\tAccept: 'application/vnd.github.machine-man-preview+json',\\n\\t\\t\\t\\t\\tAuthorization: `token ${token}`,\\n\\t\\t\\t\\t\\t'User-Agent': 'Visual-Studio-Code'\\n\\t\\t\\t\\t}\\n\\t\\t\\t}, result => {\\n\\t\\t\\t\\tconst buffer: Buffer[] = [];\\n\\t\\t\\t\\tresult.on('data', (chunk: Buffer) => {\\n\\t\\t\\t\\t\\tbuffer.push(chunk);\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tresult.on('end', () => {\\n\\t\\t\\t\\t\\tif (result.statusCode === 200) {\\n\\t\\t\\t\\t\\t\\tconst json = JSON.parse(Buffer.concat(buffer).toString());\\n\\t\\t\\t\\t\\t\\tLogger.info('Got installation info!');\\n\\t\\t\\t\\t\\t\\tconst hasInstallation = json.installations.some((installation: { app_slug: string }) => installation.app_slug === 'microsoft-visual-studio-code');\\n\\t\\t\\t\\t\\t\\tresolve(hasInstallation);\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\treject(new Error(result.statusMessage));\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\t\\t\\t});\\n\\n\\t\\t\\tpost.end();\\n\\t\\t\\tpost.on('error', err => {\\n\\t\\t\\t\\treject(err);\\n\\t\\t\\t});\\n\\t\\t});\\n\\t}\\n\\n\\tpublic async installApp(): Promise<string> {\\n\\t\\tconst clientDetails = ClientRegistrar.getGitHubAppDetails();\\n\\t\\tconst state = uuid();\\n\\t\\tconst uri = vscode.Uri.parse(`https://github.com/apps/microsoft-visual-studio-code/installations/new?state=${state}`);\\n\\n\\t\\tvscode.env.openExternal(uri);\\n\\t\\treturn promiseFromEvent(uriHandler.event, exchangeCodeForToken(state, clientDetails));\\n\\t}\\n\\n\\tpublic async getUserInfo(token: string): Promise<{ id: string, accountName: string }> {\\n\\t\\treturn new Promise((resolve, reject) => {\\n\\t\\t\\tLogger.info('Getting account info...');\\n\\t\\t\\tconst post = https.request({\\n\\t\\t\\t\\thost: 'api.github.com',\\n\\t\\t\\t\\tpath: `/user`,\\n\\t\\t\\t\\tmethod: 'GET',\\n\\t\\t\\t\\theaders: {\\n\\t\\t\\t\\t\\tAuthorization: `token ${token}`,\\n\\t\\t\\t\\t\\t'User-Agent': 'Visual-Studio-Code'\\n\\t\\t\\t\\t}\\n\\t\\t\\t}, result => {\\n\\t\\t\\t\\tconst buffer: Buffer[] = [];\\n\\t\\t\\t\\tresult.on('data', (chunk: Buffer) => {\\n\\t\\t\\t\\t\\tbuffer.push(chunk);\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tresult.on('end', () => {\\n\\t\\t\\t\\t\\tif (result.statusCode === 200) {\\n\\t\\t\\t\\t\\t\\tconst json = JSON.parse(Buffer.concat(buffer).toString());\\n\\t\\t\\t\\t\\t\\tLogger.info('Got account info!');\\n\\t\\t\\t\\t\\t\\tresolve({ id: json.id, accountName: json.login });\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\treject(new Error(result.statusMessage));\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\t\\t\\t});\\n\\n\\t\\t\\tpost.end();\\n\\t\\t\\tpost.on('error', err => {\\n\\t\\t\\t\\treject(err);\\n\\t\\t\\t});\\n\\t\\t});\\n\\t}\\n\\n\\tpublic async revokeToken(token: string): Promise<void> {\\n\\t\\treturn new Promise(async (resolve, reject) => {\\n\\t\\t\\tconst callbackUri = await vscode.env.asExternalUri(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.github-authentication/did-authenticate`));\\n\\t\\t\\tconst clientDetails = ClientRegistrar.getClientDetails(callbackUri);\\n\\t\\t\\tconst detailsString = `${clientDetails.id}:${clientDetails.secret}`;\\n\\n\\t\\t\\tconst payload = JSON.stringify({ access_token: token });\\n\\n\\t\\t\\tLogger.info('Revoking token...');\\n\\t\\t\\tconst post = https.request({\\n\\t\\t\\t\\thost: 'api.github.com',\\n\\t\\t\\t\\tpath: `/applications/${clientDetails.id}/token`,\\n\\t\\t\\t\\tmethod: 'DELETE',\\n\\t\\t\\t\\theaders: {\\n\\t\\t\\t\\t\\tAuthorization: `Basic ${Buffer.from(detailsString).toString('base64')}`,\\n\\t\\t\\t\\t\\t'User-Agent': 'Visual-Studio-Code',\\n\\t\\t\\t\\t\\t'Content-Type': 'application/json',\\n\\t\\t\\t\\t\\t'Content-Length': Buffer.byteLength(payload)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}, result => {\\n\\t\\t\\t\\tconst buffer: Buffer[] = [];\\n\\t\\t\\t\\tresult.on('data', (chunk: Buffer) => {\\n\\t\\t\\t\\t\\tbuffer.push(chunk);\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tresult.on('end', () => {\\n\\t\\t\\t\\t\\tif (result.statusCode === 204) {\\n\\t\\t\\t\\t\\t\\tLogger.info('Revoked token!');\\n\\t\\t\\t\\t\\t\\tresolve();\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\treject(new Error(result.statusMessage));\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\t\\t\\t});\\n\\n\\t\\t\\tpost.write(payload);\\n\\t\\t\\tpost.end();\\n\\t\\t\\tpost.on('error', err => {\\n\\t\\t\\t\\treject(err);\\n\\t\\t\\t});\\n\\t\\t});\\n\\t}\\n}\\n\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport * as vscode from 'vscode';\\nimport { GitHubAuthenticationProvider, onDidChangeSessions } from './github';\\nimport { uriHandler } from './githubServer';\\nimport Logger from './common/logger';\\n\\nexport async function activate(context: vscode.ExtensionContext) {\\n\\n\\tcontext.subscriptions.push(vscode.window.registerUriHandler(uriHandler));\\n\\tconst loginService = new GitHubAuthenticationProvider();\\n\\n\\tawait loginService.initialize();\\n\\n\\tvscode.authentication.registerAuthenticationProvider({\\n\\t\\tid: 'github',\\n\\t\\tdisplayName: 'GitHub',\\n\\t\\tonDidChangeSessions: onDidChangeSessions.event,\\n\\t\\tgetSessions: () => Promise.resolve(loginService.sessions),\\n\\t\\tlogin: async (scopeList: string[]) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst session = await loginService.login(scopeList.join(' '));\\n\\t\\t\\t\\tLogger.info('Login success!');\\n\\t\\t\\t\\tonDidChangeSessions.fire({ added: [session.id], removed: [], changed: [] });\\n\\t\\t\\t\\treturn session;\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\tvscode.window.showErrorMessage(`Sign in failed: ${e}`);\\n\\t\\t\\t\\tLogger.error(e);\\n\\t\\t\\t\\tthrow e;\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tlogout: async (id: string) => {\\n\\t\\t\\tawait loginService.logout(id);\\n\\t\\t\\tonDidChangeSessions.fire({ added: [], removed: [id], changed: [] });\\n\\t\\t}\\n\\t});\\n\\n\\treturn;\\n}\\n\\n// this method is called when your extension is deactivated\\nexport function deactivate() { }\\n\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport * as vscode from 'vscode';\\nimport * as uuid from 'uuid';\\nimport { keychain } from './common/keychain';\\nimport { GitHubServer } from './githubServer';\\nimport Logger from './common/logger';\\n\\nexport const onDidChangeSessions = new vscode.EventEmitter<vscode.AuthenticationSessionsChangeEvent>();\\n\\ninterface SessionData {\\n\\tid: string;\\n\\taccountName: string;\\n\\tscopes: string[];\\n\\taccessToken: string;\\n}\\n\\nexport class GitHubAuthenticationProvider {\\n\\tprivate _sessions: vscode.AuthenticationSession[] = [];\\n\\tprivate _githubServer = new GitHubServer();\\n\\n\\tpublic async initialize(): Promise<void> {\\n\\t\\tthis._sessions = await this.readSessions();\\n\\t\\tthis.pollForChange();\\n\\t}\\n\\n\\tprivate pollForChange() {\\n\\t\\tsetTimeout(async () => {\\n\\t\\t\\tconst storedSessions = await this.readSessions();\\n\\n\\t\\t\\tconst added: string[] = [];\\n\\t\\t\\tconst removed: string[] = [];\\n\\n\\t\\t\\tstoredSessions.forEach(session => {\\n\\t\\t\\t\\tconst matchesExisting = this._sessions.some(s => s.id === session.id);\\n\\t\\t\\t\\t// Another window added a session to the keychain, add it to our state as well\\n\\t\\t\\t\\tif (!matchesExisting) {\\n\\t\\t\\t\\t\\tthis._sessions.push(session);\\n\\t\\t\\t\\t\\tadded.push(session.id);\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\n\\t\\t\\tthis._sessions.map(session => {\\n\\t\\t\\t\\tconst matchesExisting = storedSessions.some(s => s.id === session.id);\\n\\t\\t\\t\\t// Another window has logged out, remove from our state\\n\\t\\t\\t\\tif (!matchesExisting) {\\n\\t\\t\\t\\t\\tconst sessionIndex = this._sessions.findIndex(s => s.id === session.id);\\n\\t\\t\\t\\t\\tif (sessionIndex > -1) {\\n\\t\\t\\t\\t\\t\\tthis._sessions.splice(sessionIndex, 1);\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tremoved.push(session.id);\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\n\\t\\t\\tif (added.length || removed.length) {\\n\\t\\t\\t\\tonDidChangeSessions.fire({ added, removed, changed: [] });\\n\\t\\t\\t}\\n\\n\\t\\t\\tthis.pollForChange();\\n\\t\\t}, 1000 * 30);\\n\\t}\\n\\n\\tprivate async readSessions(): Promise<vscode.AuthenticationSession[]> {\\n\\t\\tconst storedSessions = await keychain.getToken();\\n\\t\\tif (storedSessions) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst sessionData: SessionData[] = JSON.parse(storedSessions);\\n\\t\\t\\t\\treturn sessionData.map(session => {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\tid: session.id,\\n\\t\\t\\t\\t\\t\\taccountName: session.accountName,\\n\\t\\t\\t\\t\\t\\tscopes: session.scopes,\\n\\t\\t\\t\\t\\t\\tgetAccessToken: () => Promise.resolve(session.accessToken)\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t});\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\tLogger.error(`Error reading sessions: ${e}`);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\treturn [];\\n\\t}\\n\\n\\tprivate async storeSessions(): Promise<void> {\\n\\t\\tconst sessionData: SessionData[] = await Promise.all(this._sessions.map(async session => {\\n\\t\\t\\tconst resolvedAccessToken = await session.getAccessToken();\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tid: session.id,\\n\\t\\t\\t\\taccountName: session.accountName,\\n\\t\\t\\t\\tscopes: session.scopes,\\n\\t\\t\\t\\taccessToken: resolvedAccessToken\\n\\t\\t\\t};\\n\\t\\t}));\\n\\n\\t\\tawait keychain.setToken(JSON.stringify(sessionData));\\n\\t}\\n\\n\\tget sessions(): vscode.AuthenticationSession[] {\\n\\t\\treturn this._sessions;\\n\\t}\\n\\n\\tpublic async login(scopes: string): Promise<vscode.AuthenticationSession> {\\n\\t\\tconst token = scopes === 'vso' ? await this.loginAndInstallApp(scopes) : await this._githubServer.login(scopes);\\n\\t\\tconst session = await this.tokenToSession(token, scopes.split(' '));\\n\\t\\tawait this.setToken(session);\\n\\t\\treturn session;\\n\\t}\\n\\n\\tpublic async loginAndInstallApp(scopes: string): Promise<string> {\\n\\t\\tconst token = await this._githubServer.login(scopes);\\n\\t\\tconst hasUserInstallation = await this._githubServer.hasUserInstallation(token);\\n\\t\\tif (hasUserInstallation) {\\n\\t\\t\\treturn token;\\n\\t\\t} else {\\n\\t\\t\\treturn this._githubServer.installApp();\\n\\t\\t}\\n\\t}\\n\\n\\tprivate async tokenToSession(token: string, scopes: string[]): Promise<vscode.AuthenticationSession> {\\n\\t\\tconst userInfo = await this._githubServer.getUserInfo(token);\\n\\t\\treturn {\\n\\t\\t\\tid: uuid(),\\n\\t\\t\\tgetAccessToken: () => Promise.resolve(token),\\n\\t\\t\\taccountName: userInfo.accountName,\\n\\t\\t\\tscopes: scopes\\n\\t\\t};\\n\\t}\\n\\tprivate async setToken(session: vscode.AuthenticationSession): Promise<void> {\\n\\t\\tconst sessionIndex = this._sessions.findIndex(s => s.id === session.id);\\n\\t\\tif (sessionIndex > -1) {\\n\\t\\t\\tthis._sessions.splice(sessionIndex, 1, session);\\n\\t\\t} else {\\n\\t\\t\\tthis._sessions.push(session);\\n\\t\\t}\\n\\n\\t\\tthis.storeSessions();\\n\\t}\\n\\n\\tpublic async logout(id: string) {\\n\\t\\tconst sessionIndex = this._sessions.findIndex(session => session.id === id);\\n\\t\\tif (sessionIndex > -1) {\\n\\t\\t\\tconst session = this._sessions.splice(sessionIndex, 1)[0];\\n\\t\\t\\tconst token = await session.getAccessToken();\\n\\t\\t\\tawait this._githubServer.revokeToken(token);\\n\\t\\t}\\n\\n\\t\\tthis.storeSessions();\\n\\t}\\n}\\n\",\"var rng = require('./lib/rng');\\nvar bytesToUuid = require('./lib/bytesToUuid');\\n\\n// **`v1()` - Generate time-based UUID**\\n//\\n// Inspired by https://github.com/LiosK/UUID.js\\n// and http://docs.python.org/library/uuid.html\\n\\nvar _nodeId;\\nvar _clockseq;\\n\\n// Previous uuid creation time\\nvar _lastMSecs = 0;\\nvar _lastNSecs = 0;\\n\\n// See https://github.com/uuidjs/uuid for API details\\nfunction v1(options, buf, offset) {\\n  var i = buf && offset || 0;\\n  var b = buf || [];\\n\\n  options = options || {};\\n  var node = options.node || _nodeId;\\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\\n\\n  // node and clockseq need to be initialized to random values if they're not\\n  // specified.  We do this lazily to minimize issues related to insufficient\\n  // system entropy.  See #189\\n  if (node == null || clockseq == null) {\\n    var seedBytes = rng();\\n    if (node == null) {\\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\\n      node = _nodeId = [\\n        seedBytes[0] | 0x01,\\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\\n      ];\\n    }\\n    if (clockseq == null) {\\n      // Per 4.2.2, randomize (14 bit) clockseq\\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\\n    }\\n  }\\n\\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\\n\\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\\n  // cycle to simulate higher resolution clock\\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\\n\\n  // Time since last uuid creation (in msecs)\\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\\n\\n  // Per 4.2.1.2, Bump clockseq on clock regression\\n  if (dt < 0 && options.clockseq === undefined) {\\n    clockseq = clockseq + 1 & 0x3fff;\\n  }\\n\\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\\n  // time interval\\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\\n    nsecs = 0;\\n  }\\n\\n  // Per 4.2.1.2 Throw error if too many uuids are requested\\n  if (nsecs >= 10000) {\\n    throw new Error('uuid.v1(): Can\\\\'t create more than 10M uuids/sec');\\n  }\\n\\n  _lastMSecs = msecs;\\n  _lastNSecs = nsecs;\\n  _clockseq = clockseq;\\n\\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\\n  msecs += 12219292800000;\\n\\n  // `time_low`\\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\\n  b[i++] = tl >>> 24 & 0xff;\\n  b[i++] = tl >>> 16 & 0xff;\\n  b[i++] = tl >>> 8 & 0xff;\\n  b[i++] = tl & 0xff;\\n\\n  // `time_mid`\\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\\n  b[i++] = tmh >>> 8 & 0xff;\\n  b[i++] = tmh & 0xff;\\n\\n  // `time_high_and_version`\\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\\n  b[i++] = tmh >>> 16 & 0xff;\\n\\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\\n  b[i++] = clockseq >>> 8 | 0x80;\\n\\n  // `clock_seq_low`\\n  b[i++] = clockseq & 0xff;\\n\\n  // `node`\\n  for (var n = 0; n < 6; ++n) {\\n    b[i + n] = node[n];\\n  }\\n\\n  return buf ? buf : bytesToUuid(b);\\n}\\n\\nmodule.exports = v1;\\n\",\"module.exports = require(\\\"crypto\\\");\",\"var rng = require('./lib/rng');\\nvar bytesToUuid = require('./lib/bytesToUuid');\\n\\nfunction v4(options, buf, offset) {\\n  var i = buf && offset || 0;\\n\\n  if (typeof(options) == 'string') {\\n    buf = options === 'binary' ? new Array(16) : null;\\n    options = null;\\n  }\\n  options = options || {};\\n\\n  var rnds = options.random || (options.rng || rng)();\\n\\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\\n\\n  // Copy bytes to buffer, if provided\\n  if (buf) {\\n    for (var ii = 0; ii < 16; ++ii) {\\n      buf[i + ii] = rnds[ii];\\n    }\\n  }\\n\\n  return buf || bytesToUuid(rnds);\\n}\\n\\nmodule.exports = v4;\\n\",null,\"/* --------------------------------------------------------------------------------------------\\r\\n * Copyright (c) Microsoft Corporation. All rights reserved.\\r\\n * Licensed under the MIT License. See License.txt in the project root for license information.\\r\\n * ------------------------------------------------------------------------------------------ */\\r\\n'use strict';\\r\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\r\\nvar path = require(\\\"path\\\");\\r\\nvar fs = require(\\\"fs\\\");\\r\\nvar toString = Object.prototype.toString;\\r\\nfunction isDefined(value) {\\r\\n    return typeof value !== 'undefined';\\r\\n}\\r\\nfunction isNumber(value) {\\r\\n    return toString.call(value) === '[object Number]';\\r\\n}\\r\\nfunction isString(value) {\\r\\n    return toString.call(value) === '[object String]';\\r\\n}\\r\\nfunction isBoolean(value) {\\r\\n    return value === true || value === false;\\r\\n}\\r\\nfunction readJsonFileSync(filename) {\\r\\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\\r\\n}\\r\\nvar MessageFormat;\\r\\n(function (MessageFormat) {\\r\\n    MessageFormat[\\\"file\\\"] = \\\"file\\\";\\r\\n    MessageFormat[\\\"bundle\\\"] = \\\"bundle\\\";\\r\\n    MessageFormat[\\\"both\\\"] = \\\"both\\\";\\r\\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\\r\\nvar BundleFormat;\\r\\n(function (BundleFormat) {\\r\\n    // the nls.bundle format\\r\\n    BundleFormat[\\\"standalone\\\"] = \\\"standalone\\\";\\r\\n    BundleFormat[\\\"languagePack\\\"] = \\\"languagePack\\\";\\r\\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\\r\\nvar LocalizeInfo;\\r\\n(function (LocalizeInfo) {\\r\\n    function is(value) {\\r\\n        var candidate = value;\\r\\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\\r\\n    }\\r\\n    LocalizeInfo.is = is;\\r\\n})(LocalizeInfo || (LocalizeInfo = {}));\\r\\nvar resolvedLanguage;\\r\\nvar resolvedBundles;\\r\\nvar options;\\r\\nvar isPseudo;\\r\\nfunction initializeSettings() {\\r\\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\\r\\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\\r\\n        try {\\r\\n            var vscodeOptions_1 = JSON.parse(process.env.VSCODE_NLS_CONFIG);\\r\\n            var language = void 0;\\r\\n            var locale = void 0;\\r\\n            if (vscodeOptions_1.availableLanguages) {\\r\\n                var value = vscodeOptions_1.availableLanguages['*'];\\r\\n                if (isString(value)) {\\r\\n                    language = value;\\r\\n                }\\r\\n            }\\r\\n            if (isString(vscodeOptions_1.locale)) {\\r\\n                options.locale = vscodeOptions_1.locale.toLowerCase();\\r\\n            }\\r\\n            if (language === undefined) {\\r\\n                options.language = options.locale;\\r\\n            }\\r\\n            else if (language !== 'en') {\\r\\n                options.language = language;\\r\\n            }\\r\\n            if (isBoolean(vscodeOptions_1._languagePackSupport)) {\\r\\n                options.languagePackSupport = vscodeOptions_1._languagePackSupport;\\r\\n            }\\r\\n            if (isString(vscodeOptions_1._cacheRoot)) {\\r\\n                options.cacheRoot = vscodeOptions_1._cacheRoot;\\r\\n            }\\r\\n            if (isString(vscodeOptions_1._languagePackId)) {\\r\\n                options.languagePackId = vscodeOptions_1._languagePackId;\\r\\n            }\\r\\n            if (isString(vscodeOptions_1._translationsConfigFile)) {\\r\\n                options.translationsConfigFile = vscodeOptions_1._translationsConfigFile;\\r\\n                try {\\r\\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\\r\\n                }\\r\\n                catch (error) {\\r\\n                    // We can't read the translation config file. Mark the cache as corrupted.\\r\\n                    if (vscodeOptions_1._corruptedFile) {\\r\\n                        var dirname = path.dirname(vscodeOptions_1._corruptedFile);\\r\\n                        fs.exists(dirname, function (exists) {\\r\\n                            if (exists) {\\r\\n                                fs.writeFile(vscodeOptions_1._corruptedFile, 'corrupted', 'utf8', function (err) {\\r\\n                                    console.error(err);\\r\\n                                });\\r\\n                            }\\r\\n                        });\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        catch (_a) {\\r\\n            // Do nothing.\\r\\n        }\\r\\n    }\\r\\n    isPseudo = options.locale === 'pseudo';\\r\\n    resolvedLanguage = undefined;\\r\\n    resolvedBundles = Object.create(null);\\r\\n}\\r\\ninitializeSettings();\\r\\nfunction supportsLanguagePack() {\\r\\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\\r\\n        && options.translationsConfig !== undefined;\\r\\n}\\r\\nfunction format(message, args) {\\r\\n    var result;\\r\\n    if (isPseudo) {\\r\\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\\r\\n        message = '\\\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\\\uFF3D';\\r\\n    }\\r\\n    if (args.length === 0) {\\r\\n        result = message;\\r\\n    }\\r\\n    else {\\r\\n        result = message.replace(/\\\\{(\\\\d+)\\\\}/g, function (match, rest) {\\r\\n            var index = rest[0];\\r\\n            var arg = args[index];\\r\\n            var replacement = match;\\r\\n            if (typeof arg === 'string') {\\r\\n                replacement = arg;\\r\\n            }\\r\\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\\r\\n                replacement = String(arg);\\r\\n            }\\r\\n            return replacement;\\r\\n        });\\r\\n    }\\r\\n    return result;\\r\\n}\\r\\nfunction createScopedLocalizeFunction(messages) {\\r\\n    return function (key, message) {\\r\\n        var args = [];\\r\\n        for (var _i = 2; _i < arguments.length; _i++) {\\r\\n            args[_i - 2] = arguments[_i];\\r\\n        }\\r\\n        if (isNumber(key)) {\\r\\n            if (key >= messages.length) {\\r\\n                console.error(\\\"Broken localize call found. Index out of bounds. Stacktrace is\\\\n: \\\" + new Error('').stack);\\r\\n                return;\\r\\n            }\\r\\n            return format(messages[key], args);\\r\\n        }\\r\\n        else {\\r\\n            if (isString(message)) {\\r\\n                console.warn(\\\"Message \\\" + message + \\\" didn't get externalized correctly.\\\");\\r\\n                return format(message, args);\\r\\n            }\\r\\n            else {\\r\\n                console.error(\\\"Broken localize call found. Stacktrace is\\\\n: \\\" + new Error('').stack);\\r\\n            }\\r\\n        }\\r\\n    };\\r\\n}\\r\\nfunction localize(key, message) {\\r\\n    var args = [];\\r\\n    for (var _i = 2; _i < arguments.length; _i++) {\\r\\n        args[_i - 2] = arguments[_i];\\r\\n    }\\r\\n    return format(message, args);\\r\\n}\\r\\nfunction resolveLanguage(file) {\\r\\n    var resolvedLanguage;\\r\\n    if (options.cacheLanguageResolution && resolvedLanguage) {\\r\\n        resolvedLanguage = resolvedLanguage;\\r\\n    }\\r\\n    else {\\r\\n        if (isPseudo || !options.language) {\\r\\n            resolvedLanguage = '.nls.json';\\r\\n        }\\r\\n        else {\\r\\n            var locale = options.language;\\r\\n            while (locale) {\\r\\n                var candidate = '.nls.' + locale + '.json';\\r\\n                if (fs.existsSync(file + candidate)) {\\r\\n                    resolvedLanguage = candidate;\\r\\n                    break;\\r\\n                }\\r\\n                else {\\r\\n                    var index = locale.lastIndexOf('-');\\r\\n                    if (index > 0) {\\r\\n                        locale = locale.substring(0, index);\\r\\n                    }\\r\\n                    else {\\r\\n                        resolvedLanguage = '.nls.json';\\r\\n                        locale = null;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        if (options.cacheLanguageResolution) {\\r\\n            resolvedLanguage = resolvedLanguage;\\r\\n        }\\r\\n    }\\r\\n    return file + resolvedLanguage;\\r\\n}\\r\\nfunction findInTheBoxBundle(root) {\\r\\n    var language = options.language;\\r\\n    while (language) {\\r\\n        var candidate = path.join(root, \\\"nls.bundle.\\\" + language + \\\".json\\\");\\r\\n        if (fs.existsSync(candidate)) {\\r\\n            return candidate;\\r\\n        }\\r\\n        else {\\r\\n            var index = language.lastIndexOf('-');\\r\\n            if (index > 0) {\\r\\n                language = language.substring(0, index);\\r\\n            }\\r\\n            else {\\r\\n                language = undefined;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    // Test if we can reslove the default bundle.\\r\\n    if (language === undefined) {\\r\\n        var candidate = path.join(root, 'nls.bundle.json');\\r\\n        if (fs.existsSync(candidate)) {\\r\\n            return candidate;\\r\\n        }\\r\\n    }\\r\\n    return undefined;\\r\\n}\\r\\nfunction mkdir(directory) {\\r\\n    try {\\r\\n        fs.mkdirSync(directory);\\r\\n    }\\r\\n    catch (err) {\\r\\n        if (err.code === 'EEXIST') {\\r\\n            return;\\r\\n        }\\r\\n        else if (err.code === 'ENOENT') {\\r\\n            var parent = path.dirname(directory);\\r\\n            if (parent !== directory) {\\r\\n                mkdir(parent);\\r\\n                fs.mkdirSync(directory);\\r\\n            }\\r\\n        }\\r\\n        else {\\r\\n            throw err;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nfunction createDefaultNlsBundle(folder) {\\r\\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\\r\\n    var result = Object.create(null);\\r\\n    for (var module_1 in metaData) {\\r\\n        var entry = metaData[module_1];\\r\\n        result[module_1] = entry.messages;\\r\\n    }\\r\\n    return result;\\r\\n}\\r\\nfunction createNLSBundle(header, metaDataPath) {\\r\\n    var languagePackLocation = options.translationsConfig[header.id];\\r\\n    if (!languagePackLocation) {\\r\\n        return undefined;\\r\\n    }\\r\\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\\r\\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\\r\\n    var result = Object.create(null);\\r\\n    for (var module_2 in metaData) {\\r\\n        var entry = metaData[module_2];\\r\\n        var translations = languagePack[header.outDir + \\\"/\\\" + module_2];\\r\\n        if (translations) {\\r\\n            var resultMessages = [];\\r\\n            for (var i = 0; i < entry.keys.length; i++) {\\r\\n                var messageKey = entry.keys[i];\\r\\n                var key = isString(messageKey) ? messageKey : messageKey.key;\\r\\n                var translatedMessage = translations[key];\\r\\n                if (translatedMessage === undefined) {\\r\\n                    translatedMessage = entry.messages[i];\\r\\n                }\\r\\n                resultMessages.push(translatedMessage);\\r\\n            }\\r\\n            result[module_2] = resultMessages;\\r\\n        }\\r\\n        else {\\r\\n            result[module_2] = entry.messages;\\r\\n        }\\r\\n    }\\r\\n    return result;\\r\\n}\\r\\nfunction touch(file) {\\r\\n    var d = new Date();\\r\\n    fs.utimes(file, d, d, function () {\\r\\n        // Do nothing. Ignore\\r\\n    });\\r\\n}\\r\\nfunction cacheBundle(key, bundle) {\\r\\n    resolvedBundles[key] = bundle;\\r\\n    return bundle;\\r\\n}\\r\\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\\r\\n    var result;\\r\\n    var bundle = path.join(options.cacheRoot, header.id + \\\"-\\\" + header.hash + \\\".json\\\");\\r\\n    var useMemoryOnly = false;\\r\\n    var writeBundle = false;\\r\\n    try {\\r\\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\\r\\n        touch(bundle);\\r\\n        return result;\\r\\n    }\\r\\n    catch (err) {\\r\\n        if (err.code === 'ENOENT') {\\r\\n            writeBundle = true;\\r\\n        }\\r\\n        else if (err instanceof SyntaxError) {\\r\\n            // We have a syntax error. So no valid JSON. Use\\r\\n            console.log(\\\"Syntax error parsing message bundle: \\\" + err.message + \\\".\\\");\\r\\n            fs.unlink(bundle, function (err) {\\r\\n                if (err) {\\r\\n                    console.error(\\\"Deleting corrupted bundle \\\" + bundle + \\\" failed.\\\");\\r\\n                }\\r\\n            });\\r\\n            useMemoryOnly = true;\\r\\n        }\\r\\n        else {\\r\\n            throw err;\\r\\n        }\\r\\n    }\\r\\n    result = createNLSBundle(header, bundlePath);\\r\\n    if (!result || useMemoryOnly) {\\r\\n        return result;\\r\\n    }\\r\\n    if (writeBundle) {\\r\\n        try {\\r\\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\\r\\n        }\\r\\n        catch (err) {\\r\\n            if (err.code === 'EEXIST') {\\r\\n                return result;\\r\\n            }\\r\\n            throw err;\\r\\n        }\\r\\n    }\\r\\n    return result;\\r\\n}\\r\\nfunction loadDefaultNlsBundle(bundlePath) {\\r\\n    try {\\r\\n        return createDefaultNlsBundle(bundlePath);\\r\\n    }\\r\\n    catch (err) {\\r\\n        console.log(\\\"Generating default bundle from meta data failed.\\\", err);\\r\\n        return undefined;\\r\\n    }\\r\\n}\\r\\nfunction loadNlsBundle(header, bundlePath) {\\r\\n    var result;\\r\\n    // Core decided to use a language pack. Do the same in the extension\\r\\n    if (supportsLanguagePack()) {\\r\\n        try {\\r\\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\\r\\n        }\\r\\n        catch (err) {\\r\\n            console.log(\\\"Load or create bundle failed \\\", err);\\r\\n        }\\r\\n    }\\r\\n    if (!result) {\\r\\n        // No language pack found, but core is running in language pack mode\\r\\n        // Don't try to use old in the box bundles since the might be stale\\r\\n        // Fall right back to the default bundle.\\r\\n        if (options.languagePackSupport) {\\r\\n            return loadDefaultNlsBundle(bundlePath);\\r\\n        }\\r\\n        var candidate = findInTheBoxBundle(bundlePath);\\r\\n        if (candidate) {\\r\\n            try {\\r\\n                return readJsonFileSync(candidate);\\r\\n            }\\r\\n            catch (err) {\\r\\n                console.log(\\\"Loading in the box message bundle failed.\\\", err);\\r\\n            }\\r\\n        }\\r\\n        result = loadDefaultNlsBundle(bundlePath);\\r\\n    }\\r\\n    return result;\\r\\n}\\r\\nfunction tryFindMetaDataHeaderFile(file) {\\r\\n    var result;\\r\\n    var dirname = path.dirname(file);\\r\\n    while (true) {\\r\\n        result = path.join(dirname, 'nls.metadata.header.json');\\r\\n        if (fs.existsSync(result)) {\\r\\n            break;\\r\\n        }\\r\\n        var parent = path.dirname(dirname);\\r\\n        if (parent === dirname) {\\r\\n            result = undefined;\\r\\n            break;\\r\\n        }\\r\\n        else {\\r\\n            dirname = parent;\\r\\n        }\\r\\n    }\\r\\n    return result;\\r\\n}\\r\\nfunction loadMessageBundle(file) {\\r\\n    if (!file) {\\r\\n        // No file. We are in dev mode. Return the default\\r\\n        // localize function.\\r\\n        return localize;\\r\\n    }\\r\\n    // Remove extension since we load json files.\\r\\n    var ext = path.extname(file);\\r\\n    if (ext) {\\r\\n        file = file.substr(0, file.length - ext.length);\\r\\n    }\\r\\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\\r\\n        var headerFile = tryFindMetaDataHeaderFile(file);\\r\\n        if (headerFile) {\\r\\n            var bundlePath = path.dirname(headerFile);\\r\\n            var bundle = resolvedBundles[bundlePath];\\r\\n            if (bundle === undefined) {\\r\\n                try {\\r\\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\\r\\n                    try {\\r\\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\\r\\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\\r\\n                    }\\r\\n                    catch (err) {\\r\\n                        console.error('Failed to load nls bundle', err);\\r\\n                        bundle = cacheBundle(bundlePath, null);\\r\\n                    }\\r\\n                }\\r\\n                catch (err) {\\r\\n                    console.error('Failed to read header file', err);\\r\\n                    bundle = cacheBundle(bundlePath, null);\\r\\n                }\\r\\n            }\\r\\n            if (bundle) {\\r\\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\\\\\/g, '/');\\r\\n                var messages = bundle.nlsBundle[module_3];\\r\\n                if (messages === undefined) {\\r\\n                    console.error(\\\"Messages for file \\\" + file + \\\" not found. See console for details.\\\");\\r\\n                    return function () {\\r\\n                        return 'Messages not found.';\\r\\n                    };\\r\\n                }\\r\\n                return createScopedLocalizeFunction(messages);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\\r\\n        // Try to load a single file bundle\\r\\n        try {\\r\\n            var json = readJsonFileSync(resolveLanguage(file));\\r\\n            if (Array.isArray(json)) {\\r\\n                return createScopedLocalizeFunction(json);\\r\\n            }\\r\\n            else {\\r\\n                if (isDefined(json.messages) && isDefined(json.keys)) {\\r\\n                    return createScopedLocalizeFunction(json.messages);\\r\\n                }\\r\\n                else {\\r\\n                    console.error(\\\"String bundle '\\\" + file + \\\"' uses an unsupported format.\\\");\\r\\n                    return function () {\\r\\n                        return 'File bundle has unsupported format. See console for details';\\r\\n                    };\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        catch (err) {\\r\\n            if (err.code !== 'ENOENT') {\\r\\n                console.error('Failed to load single file bundle', err);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    console.error(\\\"Failed to load message bundle for file \\\" + file);\\r\\n    return function () {\\r\\n        return 'Failed to load message bundle. See console for details.';\\r\\n    };\\r\\n}\\r\\nexports.loadMessageBundle = loadMessageBundle;\\r\\nfunction config(opts) {\\r\\n    if (opts) {\\r\\n        if (isString(opts.locale)) {\\r\\n            options.locale = opts.locale.toLowerCase();\\r\\n            options.language = options.locale;\\r\\n            resolvedLanguage = undefined;\\r\\n            resolvedBundles = Object.create(null);\\r\\n        }\\r\\n        if (opts.messageFormat !== undefined) {\\r\\n            options.messageFormat = opts.messageFormat;\\r\\n        }\\r\\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\\r\\n            options.languagePackSupport = false;\\r\\n        }\\r\\n    }\\r\\n    isPseudo = options.locale === 'pseudo';\\r\\n    return loadMessageBundle;\\r\\n}\\r\\nexports.config = config;\\r\\n//# sourceMappingURL=main.js.map\",\"module.exports = require(\\\"keytar\\\");\",\"module.exports = require(\\\"https\\\");\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport { Event, Disposable } from 'vscode';\\n\\nexport function filterEvent<T>(event: Event<T>, filter: (e: T) => boolean): Event<T> {\\n\\treturn (listener, thisArgs = null, disposables?) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables);\\n}\\n\\nexport function onceEvent<T>(event: Event<T>): Event<T> {\\n\\treturn (listener, thisArgs = null, disposables?) => {\\n\\t\\tconst result = event(e => {\\n\\t\\t\\tresult.dispose();\\n\\t\\t\\treturn listener.call(thisArgs, e);\\n\\t\\t}, null, disposables);\\n\\n\\t\\treturn result;\\n\\t};\\n}\\n\\n\\nexport interface PromiseAdapter<T, U> {\\n\\t(\\n\\t\\tvalue: T,\\n\\t\\tresolve:\\n\\t\\t\\t(value?: U | PromiseLike<U>) => void,\\n\\t\\treject:\\n\\t\\t\\t(reason: any) => void\\n\\t): any;\\n}\\n\\nconst passthrough = (value: any, resolve: (value?: any) => void) => resolve(value);\\n\\n/**\\n * Return a promise that resolves with the next emitted event, or with some future\\n * event as decided by an adapter.\\n *\\n * If specified, the adapter is a function that will be called with\\n * `(event, resolve, reject)`. It will be called once per event until it resolves or\\n * rejects.\\n *\\n * The default adapter is the passthrough function `(value, resolve) => resolve(value)`.\\n *\\n * @param event the event\\n * @param adapter controls resolution of the returned promise\\n * @returns a promise that resolves or rejects as specified by the adapter\\n */\\nexport async function promiseFromEvent<T, U>(\\n\\tevent: Event<T>,\\n\\tadapter: PromiseAdapter<T, U> = passthrough): Promise<U> {\\n\\tlet subscription: Disposable;\\n\\treturn new Promise<U>((resolve, reject) =>\\n\\t\\tsubscription = event((value: T) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tPromise.resolve(adapter(value, resolve, reject))\\n\\t\\t\\t\\t\\t.catch(reject);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\treject(error);\\n\\t\\t\\t}\\n\\t\\t})\\n\\t).then(\\n\\t\\t(result: U) => {\\n\\t\\t\\tsubscription.dispose();\\n\\t\\t\\treturn result;\\n\\t\\t},\\n\\t\\terror => {\\n\\t\\t\\tsubscription.dispose();\\n\\t\\t\\tthrow error;\\n\\t\\t}\\n\\t);\\n}\\n\",\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\nimport { Uri, env } from 'vscode';\\nimport * as fs from 'fs';\\nimport * as path from 'path';\\n\\nexport interface ClientDetails {\\n\\tid?: string;\\n\\tsecret?: string;\\n}\\n\\nexport interface ClientConfig {\\n\\tOSS: ClientDetails;\\n\\tINSIDERS: ClientDetails;\\n\\tSTABLE: ClientDetails;\\n\\tEXPLORATION: ClientDetails;\\n\\n\\tVSO: ClientDetails;\\n\\tVSO_PPE: ClientDetails;\\n\\tVSO_DEV: ClientDetails;\\n\\n\\tGITHUB_APP: ClientDetails;\\n}\\n\\nexport class Registrar {\\n\\tprivate _config: ClientConfig;\\n\\n\\tconstructor() {\\n\\t\\ttry {\\n\\t\\t\\tconst fileContents = fs.readFileSync(path.join(env.appRoot, 'extensions/github-authentication/src/common/config.json')).toString();\\n\\t\\t\\tthis._config = JSON.parse(fileContents);\\n\\t\\t} catch (e) {\\n\\t\\t\\tthis._config = {\\n\\t\\t\\t\\tOSS: {},\\n\\t\\t\\t\\tINSIDERS: {},\\n\\t\\t\\t\\tSTABLE: {},\\n\\t\\t\\t\\tEXPLORATION: {},\\n\\t\\t\\t\\tVSO: {},\\n\\t\\t\\t\\tVSO_PPE: {},\\n\\t\\t\\t\\tVSO_DEV: {},\\n\\t\\t\\t\\tGITHUB_APP: {}\\n\\t\\t\\t};\\n\\t\\t}\\n\\t}\\n\\n\\tgetGitHubAppDetails(): ClientDetails {\\n\\t\\tif (!this._config.GITHUB_APP.id || !this._config.GITHUB_APP.secret) {\\n\\t\\t\\tthrow new Error(`No GitHub App client configuration available`);\\n\\t\\t}\\n\\n\\t\\treturn this._config.GITHUB_APP;\\n\\t}\\n\\n\\tgetClientDetails(callbackUri: Uri): ClientDetails {\\n\\t\\tlet details: ClientDetails | undefined;\\n\\t\\tswitch (callbackUri.scheme) {\\n\\t\\t\\tcase 'code-oss':\\n\\t\\t\\t\\tdetails = this._config.OSS;\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'vscode-insiders':\\n\\t\\t\\t\\tdetails = this._config.INSIDERS;\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'vscode':\\n\\t\\t\\t\\tdetails = this._config.STABLE;\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'vscode-exploration':\\n\\t\\t\\t\\tdetails = this._config.EXPLORATION;\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'https':\\n\\t\\t\\t\\tswitch (callbackUri.authority) {\\n\\t\\t\\t\\t\\tcase 'online.visualstudio.com':\\n\\t\\t\\t\\t\\t\\tdetails = this._config.VSO;\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\tcase 'online-ppe.core.vsengsaas.visualstudio.com':\\n\\t\\t\\t\\t\\t\\tdetails = this._config.VSO_PPE;\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\tcase 'online.dev.core.vsengsaas.visualstudio.com':\\n\\t\\t\\t\\t\\t\\tdetails = this._config.VSO_DEV;\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\tthrow new Error(`Unrecognized callback ${callbackUri}`);\\n\\t\\t}\\n\\n\\t\\tif (!details.id || !details.secret) {\\n\\t\\t\\tthrow new Error(`No client configuration available for ${callbackUri}`);\\n\\t\\t}\\n\\n\\t\\treturn details;\\n\\t}\\n}\\n\\nconst ClientRegistrar = new Registrar();\\nexport default ClientRegistrar;\\n\"]}","code":"!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=8)}([function(e,t){e.exports=require(\"vscode\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const o=n(0);function s(e,t,n=\" \"){return n.repeat(Math.max(0,t-e.length))+e}const r=new class{constructor(){this.output=o.window.createOutputChannel(\"GitHub Authentication\")}data2String(e){return e instanceof Error?e.stack||e.message:!1===e.success&&e.message?e.message:e.toString()}info(e,t){this.logLevel(\"Info\",e,t)}error(e,t){this.logLevel(\"Error\",e,t)}logLevel(e,t,n){this.output.appendLine(`[${e}  - ${this.now()}] ${t}`),n&&this.output.appendLine(this.data2String(n))}now(){const e=new Date;return s(e.getUTCHours()+\"\",2,\"0\")+\":\"+s(e.getMinutes()+\"\",2,\"0\")+\":\"+s(e.getUTCSeconds()+\"\",2,\"0\")+\".\"+e.getMilliseconds()}};t.default=r},function(e,t){e.exports=require(\"path\")},function(e,t,n){var o=n(10),s=n(12),r=s;r.v1=o,r.v4=s,e.exports=r},function(e,t,n){var o=n(11);e.exports=function(){return o.randomBytes(16)}},function(e,t){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0,s=n;return[s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],\"-\",s[e[o++]],s[e[o++]],\"-\",s[e[o++]],s[e[o++]],\"-\",s[e[o++]],s[e[o++]],\"-\",s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]],s[e[o++]]].join(\"\")}},function(e,t){e.exports=require(\"fs\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.GitHubServer=t.uriHandler=void 0;const o=n(16),s=n(0),r=n(3),i=n(17),a=n(1),c=n(18);t.uriHandler=new class extends s.EventEmitter{handleUri(e){this.fire(e)}};const u=(e,t)=>async(n,s,r)=>{a.default.info(\"Exchanging code for token...\");const i=function(e){return e.query.split(\"&\").reduce((e,t)=>{const n=t.split(\"=\");return e[n[0]]=n[1],e},{})}(n),c=i.code;if(i.state!==e)return void r(\"Received mismatched state\");const u=o.request({host:\"github.com\",path:`/login/oauth/access_token?client_id=${t.id}&client_secret=${t.secret}&state=${i.state}&code=${c}`,method:\"POST\",headers:{Accept:\"application/json\"}},e=>{const t=[];e.on(\"data\",e=>{t.push(e)}),e.on(\"end\",()=>{if(200===e.statusCode){const e=JSON.parse(Buffer.concat(t).toString());a.default.info(\"Token exchange success!\"),s(e.access_token)}else r(new Error(e.statusMessage))})});u.end(),u.on(\"error\",e=>{r(e)})};t.GitHubServer=class{async login(e){a.default.info(\"Logging in...\");const n=r(),o=await s.env.asExternalUri(s.Uri.parse(`${s.env.uriScheme}://vscode.github-authentication/did-authenticate`)),l=\"vso\"===e?c.default.getGitHubAppDetails():c.default.getClientDetails(o),d=s.Uri.parse(`https://github.com/login/oauth/authorize?redirect_uri=${encodeURIComponent(o.toString())}&scope=${e}&state=${n}&client_id=${l.id}`);return s.env.openExternal(d),i.promiseFromEvent(t.uriHandler.event,u(n,l))}async hasUserInstallation(e){return new Promise((t,n)=>{a.default.info(\"Getting user installations...\");const s=o.request({host:\"api.github.com\",path:\"/user/installations\",method:\"GET\",headers:{Accept:\"application/vnd.github.machine-man-preview+json\",Authorization:`token ${e}`,\"User-Agent\":\"Visual-Studio-Code\"}},e=>{const o=[];e.on(\"data\",e=>{o.push(e)}),e.on(\"end\",()=>{if(200===e.statusCode){const e=JSON.parse(Buffer.concat(o).toString());a.default.info(\"Got installation info!\");const n=e.installations.some(e=>\"microsoft-visual-studio-code\"===e.app_slug);t(n)}else n(new Error(e.statusMessage))})});s.end(),s.on(\"error\",e=>{n(e)})})}async installApp(){const e=c.default.getGitHubAppDetails(),n=r(),o=s.Uri.parse(`https://github.com/apps/microsoft-visual-studio-code/installations/new?state=${n}`);return s.env.openExternal(o),i.promiseFromEvent(t.uriHandler.event,u(n,e))}async getUserInfo(e){return new Promise((t,n)=>{a.default.info(\"Getting account info...\");const s=o.request({host:\"api.github.com\",path:\"/user\",method:\"GET\",headers:{Authorization:`token ${e}`,\"User-Agent\":\"Visual-Studio-Code\"}},e=>{const o=[];e.on(\"data\",e=>{o.push(e)}),e.on(\"end\",()=>{if(200===e.statusCode){const e=JSON.parse(Buffer.concat(o).toString());a.default.info(\"Got account info!\"),t({id:e.id,accountName:e.login})}else n(new Error(e.statusMessage))})});s.end(),s.on(\"error\",e=>{n(e)})})}async revokeToken(e){return new Promise(async(t,n)=>{const r=await s.env.asExternalUri(s.Uri.parse(`${s.env.uriScheme}://vscode.github-authentication/did-authenticate`)),i=c.default.getClientDetails(r),u=`${i.id}:${i.secret}`,l=JSON.stringify({access_token:e});a.default.info(\"Revoking token...\");const d=o.request({host:\"api.github.com\",path:`/applications/${i.id}/token`,method:\"DELETE\",headers:{Authorization:`Basic ${Buffer.from(u).toString(\"base64\")}`,\"User-Agent\":\"Visual-Studio-Code\",\"Content-Type\":\"application/json\",\"Content-Length\":Buffer.byteLength(l)}},e=>{const o=[];e.on(\"data\",e=>{o.push(e)}),e.on(\"end\",()=>{204===e.statusCode?(a.default.info(\"Revoked token!\"),t()):n(new Error(e.statusMessage))})});d.write(l),d.end(),d.on(\"error\",e=>{n(e)})})}}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.deactivate=t.activate=void 0;const o=n(0),s=n(9),r=n(7),i=n(1);t.activate=async function(e){e.subscriptions.push(o.window.registerUriHandler(r.uriHandler));const t=new s.GitHubAuthenticationProvider;await t.initialize(),o.authentication.registerAuthenticationProvider({id:\"github\",displayName:\"GitHub\",onDidChangeSessions:s.onDidChangeSessions.event,getSessions:()=>Promise.resolve(t.sessions),login:async e=>{try{const n=await t.login(e.join(\" \"));return i.default.info(\"Login success!\"),s.onDidChangeSessions.fire({added:[n.id],removed:[],changed:[]}),n}catch(e){throw o.window.showErrorMessage(`Sign in failed: ${e}`),i.default.error(e),e}},logout:async e=>{await t.logout(e),s.onDidChangeSessions.fire({added:[],removed:[e],changed:[]})}})},t.deactivate=function(){}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.GitHubAuthenticationProvider=t.onDidChangeSessions=void 0;const o=n(0),s=n(3),r=n(13),i=n(7),a=n(1);t.onDidChangeSessions=new o.EventEmitter;t.GitHubAuthenticationProvider=class{constructor(){this._sessions=[],this._githubServer=new i.GitHubServer}async initialize(){this._sessions=await this.readSessions(),this.pollForChange()}pollForChange(){setTimeout(async()=>{const e=await this.readSessions(),n=[],o=[];e.forEach(e=>{this._sessions.some(t=>t.id===e.id)||(this._sessions.push(e),n.push(e.id))}),this._sessions.map(t=>{if(!e.some(e=>e.id===t.id)){const e=this._sessions.findIndex(e=>e.id===t.id);e>-1&&this._sessions.splice(e,1),o.push(t.id)}}),(n.length||o.length)&&t.onDidChangeSessions.fire({added:n,removed:o,changed:[]}),this.pollForChange()},3e4)}async readSessions(){const e=await r.keychain.getToken();if(e)try{return JSON.parse(e).map(e=>({id:e.id,accountName:e.accountName,scopes:e.scopes,getAccessToken:()=>Promise.resolve(e.accessToken)}))}catch(e){a.default.error(`Error reading sessions: ${e}`)}return[]}async storeSessions(){const e=await Promise.all(this._sessions.map(async e=>{const t=await e.getAccessToken();return{id:e.id,accountName:e.accountName,scopes:e.scopes,accessToken:t}}));await r.keychain.setToken(JSON.stringify(e))}get sessions(){return this._sessions}async login(e){const t=\"vso\"===e?await this.loginAndInstallApp(e):await this._githubServer.login(e),n=await this.tokenToSession(t,e.split(\" \"));return await this.setToken(n),n}async loginAndInstallApp(e){const t=await this._githubServer.login(e);return await this._githubServer.hasUserInstallation(t)?t:this._githubServer.installApp()}async tokenToSession(e,t){const n=await this._githubServer.getUserInfo(e);return{id:s(),getAccessToken:()=>Promise.resolve(e),accountName:n.accountName,scopes:t}}async setToken(e){const t=this._sessions.findIndex(t=>t.id===e.id);t>-1?this._sessions.splice(t,1,e):this._sessions.push(e),this.storeSessions()}async logout(e){const t=this._sessions.findIndex(t=>t.id===e);if(t>-1){const e=this._sessions.splice(t,1)[0],n=await e.getAccessToken();await this._githubServer.revokeToken(n)}this.storeSessions()}}},function(e,t,n){var o,s,r=n(4),i=n(5),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||o,f=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==f){var g=r();null==d&&(d=o=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==f&&(f=s=16383&(g[6]<<8|g[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,p=h-a+(v-c)/1e4;if(p<0&&void 0===e.clockseq&&(f=f+1&16383),(p<0||h>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");a=h,c=v,s=f;var m=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[u++]=m>>>24&255,l[u++]=m>>>16&255,l[u++]=m>>>8&255,l[u++]=255&m;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var S=0;S<6;++S)l[u+S]=d[S];return t||i(l)}},function(e,t){e.exports=require(\"crypto\")},function(e,t,n){var o=n(4),s=n(5);e.exports=function(e,t,n){var r=t&&n||0;\"string\"==typeof e&&(t=\"binary\"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[r+a]=i[a];return t||s(i)}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.keychain=t.Keychain=void 0;const o=n(0),s=n(1),r=n(14).loadMessageBundle(n(2).join(__dirname,\"common/keychain.ts\"));const i=`${o.env.uriScheme}-github.login`,a=\"account\";class c{constructor(){const e=function(){try{return n(15)}catch(e){console.log(e)}}();if(!e)throw new Error(\"System keychain unavailable\");this.keytar=e}async setToken(e){try{return await this.keytar.setPassword(i,a,e)}catch(e){s.default.error(`Setting token failed: ${e}`);const t=r(0,null);await o.window.showErrorMessage(r(1,null,e.message),t)===t&&o.env.openExternal(o.Uri.parse(\"https://code.visualstudio.com/docs/editor/settings-sync#_troubleshooting-keychain-issues\"))}}async getToken(){try{return await this.keytar.getPassword(i,a)}catch(e){return s.default.error(`Getting token failed: ${e}`),Promise.resolve(void 0)}}async deleteToken(){try{return await this.keytar.deletePassword(i,a)}catch(e){return s.default.error(`Deleting token failed: ${e}`),Promise.resolve(void 0)}}}t.Keychain=c,t.keychain=new c},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o,s,r,i,a,c,u=n(2),l=n(6),d=Object.prototype.toString;function f(e){return void 0!==e}function g(e){return\"[object String]\"===d.call(e)}function h(e){return JSON.parse(l.readFileSync(e,\"utf8\"))}function v(e,t){return c&&(e=\"［\"+e.replace(/[aouei]/g,\"$&$&\")+\"］\"),0===t.length?e:e.replace(/\\{(\\d+)\\}/g,function(e,n){var o=n[0],s=t[o],r=e;return\"string\"==typeof s?r=s:\"number\"!=typeof s&&\"boolean\"!=typeof s&&void 0!==s&&null!==s||(r=String(s)),r})}function p(e){return function(t,n){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];return function(e){return\"[object Number]\"===d.call(e)}(t)?t>=e.length?void console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \"+new Error(\"\").stack):v(e[t],o):g(n)?(console.warn(\"Message \"+n+\" didn't get externalized correctly.\"),v(n,o)):void console.error(\"Broken localize call found. Stacktrace is\\n: \"+new Error(\"\").stack)}}function m(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return v(t,n)}function y(e,t){return i[e]=t,t}function S(e,t){var n,o=u.join(a.cacheRoot,e.id+\"-\"+e.hash+\".json\"),s=!1,r=!1;try{return n=JSON.parse(l.readFileSync(o,{encoding:\"utf8\",flag:\"r\"})),function(e){var t=new Date;l.utimes(e,t,t,function(){})}(o),n}catch(e){if(\"ENOENT\"===e.code)r=!0;else{if(!(e instanceof SyntaxError))throw e;console.log(\"Syntax error parsing message bundle: \"+e.message+\".\"),l.unlink(o,function(e){e&&console.error(\"Deleting corrupted bundle \"+o+\" failed.\")}),s=!0}}if(!(n=function(e,t){var n=a.translationsConfig[e.id];if(n){var o=h(n).contents,s=h(u.join(t,\"nls.metadata.json\")),r=Object.create(null);for(var i in s){var c=s[i],l=o[e.outDir+\"/\"+i];if(l){for(var d=[],f=0;f<c.keys.length;f++){var v=c.keys[f],p=l[g(v)?v:v.key];void 0===p&&(p=c.messages[f]),d.push(p)}r[i]=d}else r[i]=c.messages}return r}}(e,t))||s)return n;if(r)try{l.writeFileSync(o,JSON.stringify(n),{encoding:\"utf8\",flag:\"wx\"})}catch(e){if(\"EEXIST\"===e.code)return n;throw e}return n}function b(e){try{return function(e){var t=h(u.join(e,\"nls.metadata.json\")),n=Object.create(null);for(var o in t){var s=t[o];n[o]=s.messages}return n}(e)}catch(e){return void console.log(\"Generating default bundle from meta data failed.\",e)}}function _(e,t){var n;if(!0===a.languagePackSupport&&void 0!==a.cacheRoot&&void 0!==a.languagePackId&&void 0!==a.translationsConfigFile&&void 0!==a.translationsConfig)try{n=S(e,t)}catch(e){console.log(\"Load or create bundle failed \",e)}if(!n){if(a.languagePackSupport)return b(t);var o=function(e){for(var t=a.language;t;){var n=u.join(e,\"nls.bundle.\"+t+\".json\");if(l.existsSync(n))return n;var o=t.lastIndexOf(\"-\");t=o>0?t.substring(0,o):void 0}if(void 0===t&&(n=u.join(e,\"nls.bundle.json\"),l.existsSync(n)))return n}(t);if(o)try{return h(o)}catch(e){console.log(\"Loading in the box message bundle failed.\",e)}n=b(t)}return n}function w(e){if(!e)return m;var t=u.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),a.messageFormat===o.both||a.messageFormat===o.bundle){var n=function(e){for(var t,n=u.dirname(e);t=u.join(n,\"nls.metadata.header.json\"),!l.existsSync(t);){var o=u.dirname(n);if(o===n){t=void 0;break}n=o}return t}(e);if(n){var s=u.dirname(n),r=i[s];if(void 0===r)try{var d=JSON.parse(l.readFileSync(n,\"utf8\"));try{var g=_(d,s);r=y(s,g?{header:d,nlsBundle:g}:null)}catch(e){console.error(\"Failed to load nls bundle\",e),r=y(s,null)}}catch(e){console.error(\"Failed to read header file\",e),r=y(s,null)}if(r){var v=e.substr(s.length+1).replace(/\\\\/g,\"/\"),S=r.nlsBundle[v];return void 0===S?(console.error(\"Messages for file \"+e+\" not found. See console for details.\"),function(){return\"Messages not found.\"}):p(S)}}}if(a.messageFormat===o.both||a.messageFormat===o.file)try{var b=h(function(e){var t;if(a.cacheLanguageResolution&&t)t=t;else{if(c||!a.language)t=\".nls.json\";else for(var n=a.language;n;){var o=\".nls.\"+n+\".json\";if(l.existsSync(e+o)){t=o;break}var s=n.lastIndexOf(\"-\");s>0?n=n.substring(0,s):(t=\".nls.json\",n=null)}a.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(b)?p(b):f(b.messages)&&f(b.keys)?p(b.messages):(console.error(\"String bundle '\"+e+\"' uses an unsupported format.\"),function(){return\"File bundle has unsupported format. See console for details\"})}catch(e){\"ENOENT\"!==e.code&&console.error(\"Failed to load single file bundle\",e)}return console.error(\"Failed to load message bundle for file \"+e),function(){return\"Failed to load message bundle. See console for details.\"}}!function(e){e.file=\"file\",e.bundle=\"bundle\",e.both=\"both\"}(o=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone=\"standalone\",e.languagePack=\"languagePack\"}(s=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&f(t.key)&&f(t.comment)}}(r||(r={})),function(){if(a={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:o.bundle},g(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var n=e.availableLanguages[\"*\"];g(n)&&(t=n)}if(g(e.locale)&&(a.locale=e.locale.toLowerCase()),void 0===t?a.language=a.locale:\"en\"!==t&&(a.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(a.languagePackSupport=e._languagePackSupport),g(e._cacheRoot)&&(a.cacheRoot=e._cacheRoot),g(e._languagePackId)&&(a.languagePackId=e._languagePackId),g(e._translationsConfigFile)){a.translationsConfigFile=e._translationsConfigFile;try{a.translationsConfig=h(a.translationsConfigFile)}catch(t){if(e._corruptedFile){var s=u.dirname(e._corruptedFile);l.exists(s,function(t){t&&l.writeFile(e._corruptedFile,\"corrupted\",\"utf8\",function(e){console.error(e)})})}}}}catch(e){}c=\"pseudo\"===a.locale,void 0,i=Object.create(null)}(),t.loadMessageBundle=w,t.config=function(e){return e&&(g(e.locale)&&(a.locale=e.locale.toLowerCase(),a.language=a.locale,void 0,i=Object.create(null)),void 0!==e.messageFormat&&(a.messageFormat=e.messageFormat),e.bundleFormat===s.standalone&&!0===a.languagePackSupport&&(a.languagePackSupport=!1)),c=\"pseudo\"===a.locale,w}},function(e,t){e.exports=require(\"keytar\")},function(e,t){e.exports=require(\"https\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.promiseFromEvent=t.onceEvent=t.filterEvent=void 0,t.filterEvent=function(e,t){return(n,o=null,s)=>e(e=>t(e)&&n.call(o,e),null,s)},t.onceEvent=function(e){return(t,n=null,o)=>{const s=e(e=>(s.dispose(),t.call(n,e)),null,o);return s}};const o=(e,t)=>t(e);t.promiseFromEvent=async function(e,t=o){let n;return new Promise((o,s)=>n=e(e=>{try{Promise.resolve(t(e,o,s)).catch(s)}catch(e){s(e)}})).then(e=>(n.dispose(),e),e=>{throw n.dispose(),e})}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Registrar=void 0;const o=n(0),s=n(6),r=n(2);class i{constructor(){try{const e=s.readFileSync(r.join(o.env.appRoot,\"extensions/github-authentication/src/common/config.json\")).toString();this._config=JSON.parse(e)}catch(e){this._config={OSS:{},INSIDERS:{},STABLE:{},EXPLORATION:{},VSO:{},VSO_PPE:{},VSO_DEV:{},GITHUB_APP:{}}}}getGitHubAppDetails(){if(!this._config.GITHUB_APP.id||!this._config.GITHUB_APP.secret)throw new Error(\"No GitHub App client configuration available\");return this._config.GITHUB_APP}getClientDetails(e){let t;switch(e.scheme){case\"code-oss\":t=this._config.OSS;break;case\"vscode-insiders\":t=this._config.INSIDERS;break;case\"vscode\":t=this._config.STABLE;break;case\"vscode-exploration\":t=this._config.EXPLORATION;break;case\"https\":switch(e.authority){case\"online.visualstudio.com\":t=this._config.VSO;break;case\"online-ppe.core.vsengsaas.visualstudio.com\":t=this._config.VSO_PPE;break;case\"online.dev.core.vsengsaas.visualstudio.com\":t=this._config.VSO_DEV}default:throw new Error(`Unrecognized callback ${e}`)}if(!t.id||!t.secret)throw new Error(`No client configuration available for ${e}`);return t}}t.Registrar=i;const a=new i;t.default=a}]));","extractedComments":[]}